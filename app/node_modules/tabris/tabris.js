/*!
 * Tabris.js 2.0.0-rc1
 * 
 * Copyright (c) 2014, 2017 EclipseSource Inc.
 * All rights reserved.
 * 
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 * 
 * * Redistributions of source code must retain the above copyright notice, this
 *   list of conditions and the following disclaimer.
 * 
 * * Redistributions in binary form must reproduce the above copyright notice,
 *   this list of conditions and the following disclaimer in the documentation
 *   and/or other materials provided with the distribution.
 * 
 * * Neither the name of Tabris.js nor the names of its
 *   contributors may be used to endorse or promote products derived from
 *   this software without specific prior written permission.
 * 
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE
 * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
 * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
 * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER
 * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
 * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */
'use strict';var _get=function get(t,o,n){if(t===null)t=Function.prototype;var l=Object.getOwnPropertyDescriptor(t,o);if(l===void 0){var s=Object.getPrototypeOf(t);if(s===null){}else{return get(s,o,n)}}else if('value'in l){return l.value}else{var p=l.get;if(p===void 0){return}return p.call(n)}},_createClass=function(){function defineProperties(t,o){for(var n=0,l;n<o.length;n++){l=o[n];l.enumerable=l.enumerable||!1;l.configurable=!0;if('value'in l)l.writable=!0;Object.defineProperty(t,l.key,l)}}return function(t,o,n){if(o)defineProperties(t.prototype,o);if(n)defineProperties(t,n);return t}}();function _possibleConstructorReturn(t,o){if(!t){throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called')}return o&&(typeof o==='object'||typeof o==='function')?o:t}function _inherits(t,o){if(typeof o!=='function'&&o!==null){throw new TypeError('Super expression must either be null or a function, not '+typeof o)}t.prototype=Object.create(o&&o.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}});if(o)Object.setPrototypeOf?Object.setPrototypeOf(t,o):t.__proto__=o}function _classCallCheck(t,o){if(!(t instanceof o)){throw new TypeError('Cannot call a class as a function')}}if(typeof window==='undefined'){global.window=global}delete global.Promise;require('./polyfill.js');function checkVersion(t,o){if(!o){return}var n=t.split('.').map(toInt),l=o.split('.').map(toInt);if(n[0]!==l[0]){console.error(createVersionMessage(l,n,'incompatible with'))}else if(n[1]>l[1]){console.warn(createVersionMessage(l,n,'newer than'))}}function toInt(t){return parseInt(t)}function createVersionMessage(t,o,n){var l=t[0]+'.0',s=t[0]+'.'+t[1];return'Version mismatch: JavaScript module "tabris" (version '+o.join('.')+') '+('is '+n+' the native tabris platform. ')+('Supported module versions: '+l+' to '+s+'.')}function omit(t,o){var n={};for(var l in t){if(!(o.indexOf(l)!==-1)){n[l]=t[l]}}return n}function isObject(t){return t!==null&&typeof t==='object'}function capitalizeFirstChar(t){return t.charAt(0).toUpperCase()+t.slice(1)}var Events={on:function(t,o,n){if(isObject(t)){for(var p in t){this.on(p,t[p])}return this}var l=this._isListening(t);this._callbacks=this._callbacks||[];this._callbacks[t]=(this._callbacks[t]||[]).concat();var s=this._callbacks[t].some(function(p){return(p.fn===o||'_callback'in o&&p.fn._callback===o._callback)&&p.ctx===n});if(!s){this._callbacks[t].push({fn:o,ctx:n})}if(!l){this._listen(t,!0)}return this},off:function(t,o,n){if(isObject(t)){for(var l in t){this.off(l,t[l])}return this}if(!t||!o){throw new Error('Not enough arguments')}if(this._callbacks){if(t in this._callbacks){for(var l=this._callbacks[t].concat(),s=l.length-1;s>=0;s--){if((l[s].fn===o||l[s].fn._callback===o)&&l[s].ctx===n){l.splice(s,1)}}if(l.length===0){delete this._callbacks[t];if(Object.keys(this._callbacks).length===0){delete this._callbacks}}else{this._callbacks[t]=l}}}if(!this._isListening(t)){this._listen(t,!1)}return this},once:function(t,o,n){if(isObject(t)){for(var p in t){this.once(p,t[p])}return this}var l=this,s=function(){if(!l._isDisposed){l.off(t,s,n)}o.apply(this,arguments)};s._callback=o;return this.on(t,s,n)},trigger:function(t){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this._isDisposed){if(this._callbacks&&t in this._callbacks){for(var n=this._callbacks[t],l=0,s;l<n.length;l++){s=n[l];s.fn.call(s.ctx||this,o)}}}return this},_isListening:function(t){return!!this._callbacks&&(!t||t in this._callbacks)},_listen:function(){}};function imageToArray(t){return[t.src,checkValue(t.width),checkValue(t.height),checkValue(t.scale)]}function imageFromArray(t){var o={src:t[0]};if(t[1]){o.width=t[1]}if(t[2]){o.height=t[2]}if(t[3]){o.scale=t[3]}return o}function checkValue(t){return t!=null?t:null}function colorArrayToString(t){var o=t[0],n=t[1],l=t[2],s=t.length===3?1:Math.round(t[3]*100/255)/100;return'rgba('+o+', '+n+', '+l+', '+s+')'}function colorStringToArray(t){if(t==='transparent'){return[0,0,0,0]}if(/^#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})?$/.test(t)){return[parseInt(RegExp.$1,16),parseInt(RegExp.$2,16),parseInt(RegExp.$3,16),RegExp.$4===''?255:parseInt(RegExp.$4,16)]}if(/^#([0-9a-fA-F])([0-9a-fA-F])([0-9a-fA-F])([0-9a-fA-F])?$/.test(t)){return[parseInt(RegExp.$1,16)*17,parseInt(RegExp.$2,16)*17,parseInt(RegExp.$3,16)*17,RegExp.$4===''?255:parseInt(RegExp.$4,16)*17]}if(/^rgb\s*\(\s*([+\-]?[0-9]+)\s*,\s*([+\-]?[0-9]+)\s*,\s*([+\-]?[0-9]+)\s*\)$/.test(t)){return[Math.max(0,Math.min(255,parseInt(RegExp.$1))),Math.max(0,Math.min(255,parseInt(RegExp.$2))),Math.max(0,Math.min(255,parseInt(RegExp.$3))),255]}if(/^rgba\s*\(\s*([+\-]?[0-9]+)\s*,\s*([+\-]?[0-9]+)\s*,\s*([+\-]?[0-9]+)\s*,\s*([+\-]?([0-9]*\.)?[0-9]+)\s*\)$/.test(t)){return[Math.max(0,Math.min(255,parseInt(RegExp.$1))),Math.max(0,Math.min(255,parseInt(RegExp.$2))),Math.max(0,Math.min(255,parseInt(RegExp.$3))),Math.round(Math.max(0,Math.min(1,parseFloat(RegExp.$4)))*255)]}if(t in NAMES){var o=NAMES[t];return[o[0],o[1],o[2],255]}throw new Error('invalid color: '+t)}var NAMES={black:[0,0,0],silver:[192,192,192],gray:[128,128,128],white:[255,255,255],maroon:[128,0,0],red:[255,0,0],purple:[128,0,128],fuchsia:[255,0,255],green:[0,128,0],lime:[0,255,0],olive:[128,128,0],yellow:[255,255,0],navy:[0,0,128],blue:[0,0,255],teal:[0,128,128],aqua:[0,255,255]};function fontStringToObject(t){var o={family:[],size:0,style:'normal',weight:'normal'},n=t.split(/(?:\s|^)\d+px(?:\s|$)/);checkTruthy(n.length===2||n.length===1,'Invalid font syntax');o.size=parseInt(/(?:\s|^)(\d+)px(?:\s|$)/.exec(t)[1],10);parseStyles(o,n[0]);parseFamily(o,n[1]);return o}function fontObjectToString(t){return[t.style,t.weight,t.size+'px',t.family.join(', ')].join(' ').trim()}function parseStyles(t,o){var n=o.trim().split(/\s+/);checkTruthy(n.length<=2,'Too many font styles');n.forEach(function(l){switch(l.trim()){case'italic':checkTruthy(t.style==='normal','Invalid font variant');t.style='italic';break;case'black':case'bold':case'medium':case'thin':case'light':checkTruthy(t.weight==='normal','Invalid font weight');t.weight=l.trim();break;case'normal':case'':break;default:throw new Error('Unknown font property: '+l.trim());}})}function parseFamily(t,o){(o?o.split(','):[]).forEach(function(n){var l=/(?:^\s*[^\"\']+\s*$)|(?:^\s*\"[^\"\']+\"\s*$)|(?:^\s*\'[^\"\']+\'\s*$)/.exec(n);checkTruthy(l,'Invalid font family: '+n);t.family.push(/^\s*[\"\']?([^\"\']*)/.exec(n)[1].trim())})}function checkTruthy(t,o){if(!t){throw new Error(o)}}var EventObject=function(){function EventObject(t,o){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};_classCallCheck(this,EventObject);if(arguments.length<2){throw new Error('Not enough arguments to Event')}Object.defineProperties(this,{type:{enumerable:!0,value:t},target:{enumerable:!0,value:o},timeStamp:{enumerable:!0,value:Date.now()}});for(var l in n){if(!(l in this)){Object.defineProperty(this,l,{enumerable:!0,value:n[l]})}}}_createClass(EventObject,[{key:'preventDefault',value:function preventDefault(){this.$defaultPrevented=!0}},{key:'defaultPrevented',get:function(){return!!this.$defaultPrevented}}]);return EventObject}();function EventsClass(){}Object.assign(EventsClass.prototype,Events);var NativeObject=function(t){_inherits(NativeObject,t);_createClass(NativeObject,null,[{key:'defineProperties',value:function defineProperties(o,n){for(var l in n){NativeObject.defineProperty(o,l,n[l])}}},{key:'defineProperty',value:function(o,n,l){o['$prop_'+n]=normalizeProperty(l);Object.defineProperty(o,n,{set:function(s){this.$setProperty(n,s)},get:function(){return this.$getProperty(n)}})}},{key:'extend',value:function extend(o){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:NativeObject;return function(l){_inherits(_class,l);function _class(s){_classCallCheck(this,_class);var p=_possibleConstructorReturn(this,(_class.__proto__||Object.getPrototypeOf(_class)).call(this));p._create(o,s||{});return p}return _class}(n)}}]);function NativeObject(o){_classCallCheck(this,NativeObject);var n=_possibleConstructorReturn(this,(NativeObject.__proto__||Object.getPrototypeOf(NativeObject)).call(this));if(!tabris._nativeBridge){throw new Error('tabris.js not started')}if(n.constructor===NativeObject){throw new Error('Cannot instantiate abstract NativeObject')}o=tabris._proxies.register(n,o);Object.defineProperty(n,'cid',{value:o});return n}_createClass(NativeObject,[{key:'set',value:function set(o,n){if(typeof o==='string'){setExistingProperty.call(this,o,n)}else{this._reorderProperties(Object.keys(o)).forEach(function(l){setExistingProperty.call(this,l,o[l])},this)}return this}},{key:'get',value:function get(o){return this[o]}},{key:'$getProperty',value:function $getProperty(o){if(this._isDisposed){console.warn('Cannot get property "'+o+'" on disposed object');return}var n=this.$getPropertyGetter(o)||this._getStoredProperty,l=n.call(this,o);return this._decodeProperty(this._getTypeDef(o),l)}},{key:'$setProperty',value:function $setProperty(o,n){if(this._isDisposed){console.warn('Cannot set property "'+o+'" on disposed object');return}var l=this._getTypeDef(o),s;try{s=this._encodeProperty(l,n)}catch(u){console.warn(this+': Ignored unsupported value for property "'+o+'": '+u.message);return}var p=this.$getPropertySetter(o)||this._storeProperty;p.call(this,o,s)}},{key:'_storeProperty',value:function _storeProperty(o,n){var l=this._getStoredProperty(o);if(n===l){return}if(n===void 0&&this._props){delete this._props[o]}else{if(!this._props){this._props={}}this._props[o]=n}this._triggerChangeEvent(o,n)}},{key:'_getStoredProperty',value:function _getStoredProperty(o){var n=this._props?this._props[o]:void 0;if(n===void 0){n=this._getDefaultPropertyValue(o)}return n}},{key:'_getTypeDef',value:function _getTypeDef(o){var n=this['$prop_'+o];return n?n.type:null}},{key:'_getDefaultPropertyValue',value:function _getDefaultPropertyValue(o){var n=this['$prop_'+o];return n?valueOf(n.default):void 0}},{key:'_encodeProperty',value:function _encodeProperty(o,n){return o&&o.encode?o.encode(n):n}},{key:'_decodeProperty',value:function _decodeProperty(o,n){return o&&o.decode?o.decode(n):n}},{key:'$getPropertyGetter',value:function $getPropertyGetter(o){var n=this['$prop_'+o];return n?n.get:void 0}},{key:'$getPropertySetter',value:function $getPropertySetter(o){var n=this['$prop_'+o];return n?n.set:void 0}},{key:'_triggerChangeEvent',value:function _triggerChangeEvent(o,n){var l=this._getTypeDef(o),s=this._decodeProperty(l,n);this._trigger(o+'Changed',{value:s})}},{key:'_create',value:function _create(o){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};tabris._nativeBridge.create(this.cid,o);this._reorderProperties(Object.keys(n)).forEach(function(l){setExistingProperty.call(this,l,n[l])},this);return this}},{key:'_reorderProperties',value:function _reorderProperties(o){return o}},{key:'dispose',value:function dispose(){this._dispose()}},{key:'_dispose',value:function _dispose(o){if(!this._isDisposed&&!this._inDispose){this._inDispose=!0;this._trigger('dispose');this._release();if(!o){tabris._nativeBridge.destroy(this.cid)}tabris._proxies.remove(this.cid);delete this._props;this._isDisposed=!0}}},{key:'_release',value:function _release(){}},{key:'isDisposed',value:function isDisposed(){return!!this._isDisposed}},{key:'_listen',value:function _listen(){}},{key:'_nativeListen',value:function _nativeListen(o,n){this._checkDisposed();tabris._nativeBridge.listen(this.cid,o,n)}},{key:'_trigger',value:function _trigger(o){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},l=new EventObject(o,this,n);this.trigger(o,l);return!!l.defaultPrevented}},{key:'_onoff',value:function _onoff(o,n,l){n?this.on(o,l):this.off(o,l)}},{key:'_checkDisposed',value:function _checkDisposed(){if(this._isDisposed){throw new Error('Object is disposed')}}},{key:'_nativeSet',value:function _nativeSet(o,n){this._checkDisposed();tabris._nativeBridge.set(this.cid,o,n)}},{key:'_nativeGet',value:function _nativeGet(o){this._checkDisposed();return tabris._nativeBridge.get(this.cid,o)}},{key:'_nativeCall',value:function _nativeCall(o,n){this._checkDisposed();return tabris._nativeBridge.call(this.cid,o,n)}},{key:'toString',value:function(){return this.constructor.name}}]);return NativeObject}(EventsClass);function setExistingProperty(t,o){if(t in this){this[t]=o}else{console.warn('Unknown property "'+t+'"')}}function normalizeProperty(t){var o=typeof t==='string'?{type:t}:t;return{type:resolveType(o.type||'any'),default:o.default,nocache:o.nocache,set:o.readonly&&readOnlySetter||o.set||defaultSetter,get:o.get||defaultGetter}}function resolveType(t){var o=t;if(typeof t==='string'){o=types[t]}else if(Array.isArray(t)){o=types[t[0]]}if(typeof o!=='object'){throw new Error('Can not find property type '+t)}if(Array.isArray(t)){o=Object.assign({},o);var n=t.slice(1);if(o.encode){o.encode=wrapCoder(o.encode,n)}if(o.decode){o.decode=wrapCoder(o.decode,n)}}return o}function wrapCoder(t,o){return function(n){return t.apply(global,[n].concat(o))}}function readOnlySetter(t){console.warn('Can not set read-only property "'+t+'"')}function defaultSetter(t,o){this._nativeSet(t,o);if(this['$prop_'+t].nocache){this._triggerChangeEvent(t,o)}else{this._storeProperty(t,o)}}function defaultGetter(t){var o=this._getStoredProperty(t);if(o===void 0){o=this._nativeGet(t)}return o}function valueOf(t){return t instanceof Function?t():t}var WidgetCollection=function(){function WidgetCollection(t,o,n){_classCallCheck(this,WidgetCollection);this._array=select(t,o||'*',n);for(var l=0;l<this._array.length;l++){this[l]=this._array[l]}}_createClass(WidgetCollection,[{key:'first',value:function first(){return this._array[0]}},{key:'last',value:function last(){return this._array[this._array.length-1]}},{key:'toArray',value:function(){return this._array.concat()}},{key:'forEach',value:function forEach(t){var o=this;this._array.forEach(function(n,l){return t(n,l,o)})}},{key:'indexOf',value:function indexOf(t){return this._array.indexOf(t)}},{key:'includes',value:function includes(t){return this._array.indexOf(t)!==-1}},{key:'filter',value:function filter(t){return new WidgetCollection(this._array,t)}},{key:'get',value:function get(t){if(this._array[0]){return this._array[0].get(t)}}},{key:'parent',value:function parent(){var t=[];for(var o of this._array){var n=o.parent();if(n&&t.indexOf(n)===-1){t.push(n)}}if(t.length){return new WidgetCollection(t)}}},{key:'children',value:function children(t){var o=[];for(var n of this._array){o.push.apply(o,n._getSelectableChildren()||[])}return new WidgetCollection(o,t)}},{key:'find',value:function find(t){return new WidgetCollection(this.children()._array,t,!0)}},{key:'appendTo',value:function appendTo(t){t.append(this)}},{key:'set',value:function set(){var t=arguments;this._array.forEach(function(o){return o.set.apply(o,t)});return this}},{key:'on',value:function on(){var t=arguments;this._array.forEach(function(o){return o.on.apply(o,t)});return this}},{key:'off',value:function off(){var t=arguments;this._array.forEach(function(o){return o.off.apply(o,t)});return this}},{key:'once',value:function once(){var t=arguments;this._array.forEach(function(o){return o.once.apply(o,t)});return this}},{key:'trigger',value:function trigger(){var t=arguments;this._array.forEach(function(o){return o.trigger.apply(o,t)});return this}},{key:'animate',value:function(){var t=arguments;this._array.forEach(function(o){return o.animate.apply(o,t)})}},{key:'dispose',value:function dispose(){var t=arguments;this._array.forEach(function(o){return o.dispose.apply(o,t)})}},{key:'length',get:function(){return this._array.length}}]);return WidgetCollection}();function select(t,o,n){if(!t||t.length===0){return[]}if(o==='*'&&!n){return t.concat()}var l=getFilter(o);if(n){return deepSelect([],t,l)}return t.filter(l)}function deepSelect(t,o,n){for(var l of o){if(n(l)){t.push(l)}if(l._children){deepSelect(t,l._getSelectableChildren(),n)}}return t}function getFilter(t){var o={},n=t instanceof Function?t:createMatcher(t);return function(l){if(o[l.cid]){return!1}if(n(l)){o[l.cid]=!0;return!0}return!1}}function createMatcher(t){if(t.charAt(0)==='#'){var o=t.slice(1);return function(n){return o===n.id}}if(t.charAt(0)==='.'){var o=t.slice(1);return function(n){return n.classList.indexOf(o)!==-1}}if(t==='*'){return function(){return!0}}return function(o){return t===o.constructor.name}}var types={any:{},boolean:{encode:function(t){return!!t}},string:{encode:function(t){return''+t}},number:{encode:function(t){return encodeNumber(t)}},natural:{encode:function(t){t=encodeNumber(t);return t<0?0:Math.round(t)}},integer:{encode:function(t){t=encodeNumber(t);return Math.round(t)}},function:{encode:function(t){if('function'!==typeof t){throw new Error(typeof t+' is not a function: '+t)}return t}},choice:{encode:function(t,o){if(o.indexOf(t)===-1){throwNotAcceptedError(o,t)}return t}},color:{encode:function(t){if(t==='initial'){return}return colorStringToArray(t)},decode:function(t){if(!t){return'rgba(0, 0, 0, 0)'}return colorArrayToString(t)}},font:{encode:function(t){if(t==='initial'){return}return fontStringToObject(t)},decode:function(t){if(!t){return'initial'}return fontObjectToString(t)}},image:{encode:function(t){if(!t){return null}if(typeof t==='string'){t={src:t}}if(typeof t!=='object'){throw new Error('Not an image: '+t)}if(typeof t.src!=='string'){throw new Error('image.src is not a string')}if(t.src===''){throw new Error('image.src is an empty string')}['scale','width','height'].forEach(function(o){if(o in t&&!isDimension(t[o])){throw new Error('image.'+o+' is not a dimension: '+t[o])}});if('scale'in t&&('width'in t||'height'in t)){console.warn('Image scale is ignored if width or height are given')}return imageToArray(t)},decode:function(t){if(!t){return null}return imageFromArray(t)}},layoutData:{encode:function(t){return encodeLayoutData(t)},decode:function(t){return decodeLayoutData(t)}},edge:{encode:function(t){return t==null?null:encodeEdge(t)},decode:decodeLayoutAttr},dimension:{encode:function(t){return t==null?null:encodeNumber(t)},decode:decodeLayoutAttr},sibling:{encode:function(t){return t==null?null:encodeWidgetRef(t)},decode:decodeLayoutAttr},bounds:{encode:function(t){return[t.left,t.top,t.width,t.height]},decode:function(t){return{left:t[0],top:t[1],width:t[2],height:t[3]}}},proxy:{encode:function(t){if(t instanceof NativeObject){return t.cid}if(t instanceof WidgetCollection){return t[0]?t[0].cid:null}return t},decode:function(t){return tabris._proxies.find(t)}},nullable:{encode:function(t,o){if(t===null){return t}return types[o].encode(t)}},opacity:{encode:function(t){t=encodeNumber(t);if(t<0||t>1){throw new Error('Number is out of bounds: '+t)}return t}},transform:{encode:function(t){var o=Object.assign({},transformDefaults);for(var n in t){if(!(n in transformDefaults)){throw new Error('Not a valid transformation containing "'+n+'"')}o[n]=encodeNumber(t[n])}return o}},array:{encode:function(t,o){if(t==null){return[]}if(!(t instanceof Array)){throw new Error(typeof t+' is not an array: '+t)}if(o){return t.map(types[o].encode)}return t}}},numberRegex=/^[+-]?([0-9]+|[0-9]*\.[0-9]+)$/,selectorRegex=/^(\*|prev\(\)|([#.]?[A-Za-z_][A-Za-z0-9_-]+))$/;function isDimension(t){return typeof t==='number'&&!isNaN(t)&&t>=0&&t!==Infinity}function throwNotAcceptedError(t,o){var n=['Accepting "',t.join('", "'),'", given was: "',o+'"'];throw new Error(n.join(''))}function encodeNumber(t){if(typeof t==='string'&&numberRegex.test(t)){return parseFloat(t)}if(typeof t!=='number'){throw new Error('Not a number: '+toString(t))}if(!isFinite(t)){throw new Error('Invalid number: '+toString(t))}return t}var transformDefaults={rotation:0,scaleX:1,scaleY:1,translationX:0,translationY:0,translationZ:0},layoutEncoders={width:encodeNumber,height:encodeNumber,left:encodeEdge,right:encodeEdge,top:encodeEdge,bottom:encodeEdge,centerX:encodeNumber,centerY:encodeNumber,baseline:encodeWidgetRef};function encodeLayoutData(t){var o={};for(var n in t){if(t[n]!=null){if(!(n in layoutEncoders)){throw new Error('Invalid key \''+n+'\' in layoutData')}try{o[n]=layoutEncoders[n](t[n])}catch(l){throw new Error('Invalid value for \''+n+'\': '+l.message)}}}return o}function encodeEdge(t){if(typeof t==='string'){if(t.indexOf(' ')!==-1){return encodeEdgeArray(t.split(/\s+/))}if(t[t.length-1]==='%'){var o=encodePercentage(t);return o===0?0:[o,0]}if(numberRegex.test(t)){return[0,parseFloat(t)]}if(selectorRegex.test(t)){return[t,0]}throw new Error('Invalid dimension: '+toString(t))}if(typeof t==='number'){if(!isFinite(t)){throw new Error('Invalid number: '+toString(t))}return t}if(Array.isArray(t)){return encodeEdgeArray(t)}if(t instanceof NativeObject){return[t,0]}throw new Error('Invalid dimension: '+toString(t))}function encodeEdgeArray(t){if(t.length!==2){throw new Error('Wrong number of elements (must be 2): '+toString(t))}var o=encodeEdgeRef(t[0]),n=encodeNumber(t[1]);return o===0?n:[o,n]}function encodeEdgeRef(t){if(typeof t==='string'){if(t[t.length-1]==='%'){return encodePercentage(t)}if(selectorRegex.test(t)){return t}}if(typeof t==='number'){if(!isFinite(t)){throw new Error('Invalid number: '+toString(t))}return t}if(t instanceof NativeObject){return t}throw new Error('Not a percentage or widget reference: '+toString(t))}function encodePercentage(t){var o=t.substr(0,t.length-1);if(numberRegex.test(o)){return parseFloat(o)}throw new Error('Invalid percentage value: '+toString(t))}function encodeWidgetRef(t){if(t instanceof NativeObject){return t}if(typeof t==='string'&&selectorRegex.test(t)){return t}throw new Error('Not a widget reference: '+toString(t))}function decodeLayoutData(t){if(!t){return null}var o={};for(var n in t){o[n]=decodeLayoutAttr(t[n])}return o}function decodeLayoutAttr(t){if(Array.isArray(t)){if(t[0]===0){return t[1]}if(t[1]===0){return typeof t[0]==='number'?t[0]+'%':t[0]}return[typeof t[0]==='number'?t[0]+'%':t[0],t[1]]}return t}function toString(t){if(typeof t==='string'){return'\''+t+'\''}if(Array.isArray(t)){return'['+t.map(toString).join(', ')+']'}if(typeof t==='object'&&t!=null){return'{'+Object.keys(t).join(', ')+'}'}return''+t}var Layout={checkConsistency:function(t){var o=t;if('centerX'in o){if('left'in o||'right'in o){console.warn('Inconsistent layoutData: centerX overrides left and right');o=omit(o,['left','right'])}}if('baseline'in o){if('top'in o||'bottom'in o||'centerY'in o){console.warn('Inconsistent layoutData: baseline overrides top, bottom, and centerY');o=omit(o,['top','bottom','centerY'])}}else if('centerY'in o){if('top'in o||'bottom'in o){console.warn('Inconsistent layoutData: centerY overrides top and bottom');o=omit(o,['top','bottom'])}}if('left'in o&&'right'in o&&'width'in o){console.warn('Inconsistent layoutData: left and right are set, ignore width');o=omit(o,['width'])}if('top'in o&&'bottom'in o&&'height'in o){console.warn('Inconsistent layoutData: top and bottom are set, ignore height');o=omit(o,['height'])}return o},resolveReferences:function(t,o){if(!o){return t}var n={};for(var l in t){n[l]=resolveAttribute(t[l],o)}return n},addToQueue:function(t){layoutQueue[t.cid]=t},flushQueue:function(){for(var t in layoutQueue){layoutQueue[t]._flushLayout()}layoutQueue={}}},layoutQueue={};function resolveAttribute(t,o){if(Array.isArray(t)){return resolveArray(t,o)}if(isNumber(t)){return t}return toProxyId(t,o)}function resolveArray(t,o){if(isNumber(t[0])){return t}return[toProxyId(t[0],o),t[1]]}function toProxyId(t,o){if(t==='prev()'){var n=getParent(o).children(),l=n.indexOf(o);if(l>0){return types.proxy.encode(n[l-1])||0}return 0}if(typeof t==='string'){var n=getParent(o).children(t)[0];return types.proxy.encode(n)||0}return types.proxy.encode(t)||0}function isNumber(t){return typeof t==='number'&&isFinite(t)}function getParent(t){return t.parent()||emptyParent}var emptyParent={children:function(){return[]}},NativeBridge=function(){function NativeBridge(t){_classCallCheck(this,NativeBridge);this.$bridge=t;this.$operations=[];this.$currentOperation={id:null};tabris.on('flush',this.flush,this)}_createClass(NativeBridge,[{key:'create',value:function(t,o){var n={};this.$operations.push(['create',t,o,n]);this.$currentOperation={id:t,properties:n}}},{key:'set',value:function set(t,o,n){if(this.$currentOperation.id===t){this.$currentOperation.properties[o]=n}else{var l={};l[o]=n;this.$operations.push(['set',t,l]);this.$currentOperation={id:t,properties:l}}}},{key:'listen',value:function listen(t,o,n){this.$operations.push(['listen',t,o,n]);this.$currentOperation={id:null}}},{key:'destroy',value:function destroy(t){this.$operations.push(['destroy',t]);this.$currentOperation={id:null}}},{key:'get',value:function get(t,o){this.flush();return this.$bridge.get(t,o)}},{key:'call',value:function call(t,o,n){this.flush();return this.$bridge.call(t,o,n)}},{key:'flush',value:function flush(){Layout.flushQueue();var t=this.$operations;this.$operations=[];this.$currentOperation={id:null};for(var o=t.length,n=0,l;n<o;n++){l=t[n];switch(l[0]){case'create':this.$bridge.create(l[1],l[2],l[3]);break;case'set':this.$bridge.set(l[1],l[2]);break;case'listen':this.$bridge.listen(l[1],l[2],l[3]);break;case'destroy':this.$bridge.destroy(l[1]);}}}}]);return NativeBridge}(),ProxyStore=function(){function ProxyStore(){_classCallCheck(this,ProxyStore);this.$idSequence=1;this.$proxies={}}_createClass(ProxyStore,[{key:'register',value:function register(t,o){var n=o||this.$generateId();if(n in this.$proxies){throw new Error('cid already in use: '+n)}this.$proxies[n]=t;return n}},{key:'remove',value:function remove(t){delete this.$proxies[t]}},{key:'find',value:function find(t){return this.$proxies[t]||null}},{key:'$generateId',value:function $generateId(){return'o'+this.$idSequence++}}]);return ProxyStore}(),Tabris=function(){function Tabris(){_classCallCheck(this,Tabris);this._started=!1;this._init=this._init.bind(this);this._notify=this._notify.bind(this)}_createClass(Tabris,[{key:'_init',value:function _init(t){this._client=t;this._proxies=new ProxyStore;this._nativeBridge=new NativeBridge(t);this.trigger('start');this._started=!0}},{key:'_setEntryPoint',value:function _setEntryPoint(t){this._entryPoint=t}},{key:'_notify',value:function _notify(t,o,n){var l;try{var s=this._proxies.find(t);if(s){try{l=s._trigger(o,n)}catch(p){console.error(p);console.log(p.stack)}}this.trigger('flush')}catch(s){console.error(s);console.log(s.stack)}return l}},{key:'version',get:function(){return'2.0.0-rc1'}},{key:'started',get:function(){return!!this._started}}]);return Tabris}();Object.assign(Tabris.prototype,Events);var Device=function(t){_inherits(Device,t);function Device(){_classCallCheck(this,Device);var o=_possibleConstructorReturn(this,(Device.__proto__||Object.getPrototypeOf(Device)).call(this,'tabris.Device'));if(arguments[0]!==!0){throw new Error('Device can not be created')}o._create('tabris.Device');return o}_createClass(Device,[{key:'_listen',value:function _listen(o,n){if(o==='orientationChanged'){this._nativeListen('orientationchange',n)}else{_get(Device.prototype.__proto__||Object.getPrototypeOf(Device.prototype),'_listen',this).call(this,o,n)}}},{key:'_trigger',value:function _trigger(o,n){if(o==='orientationchange'){this._triggerChangeEvent('orientation',n.orientation)}else{_get(Device.prototype.__proto__||Object.getPrototypeOf(Device.prototype),'_trigger',this).call(this,o,n)}}},{key:'dispose',value:function dispose(){throw new Error('Cannot dispose device object')}}]);return Device}(NativeObject);NativeObject.defineProperties(Device.prototype,{model:{type:'any',readonly:!0},platform:{type:'any',readonly:!0},version:{type:'any',readonly:!0},language:{type:'any',readonly:!0},orientation:{type:'any',readonly:!0},screenWidth:{type:'any',readonly:!0},screenHeight:{type:'any',readonly:!0},scaleFactor:{type:'any',readonly:!0},win_keyboardPresent:{type:'any',readonly:!0},win_primaryInput:{type:'any',readonly:!0}});function create(){return new Device(!0)}function publishDeviceProperties(t,o){o.devicePixelRatio=t.scaleFactor;o.device=createDevice(t);o.screen=createScreen(t);o.navigator=createNavigator(t)}function createDevice(t){var o={};['model','platform','version'].forEach(function(n){defineReadOnlyProperty(o,n,function(){return t[n]})});return o}function createScreen(t){var o={};defineReadOnlyProperty(o,'width',function(){return t.screenWidth});defineReadOnlyProperty(o,'height',function(){return t.screenHeight});return o}function createNavigator(t){var o={};defineReadOnlyProperty(o,'userAgent',function(){return'tabris-js'});defineReadOnlyProperty(o,'language',function(){return t.language});return o}function defineReadOnlyProperty(t,o,n){Object.defineProperty(t,o,{get:n,set:function(){}})}var CERTIFICATE_ALGORITHMS=['RSA2048','RSA4096','ECDSA256'],EVENT_TYPES=['foreground','background','pause','resume','terminate','backNavigation','certificatesReceived'],App=function(t){_inherits(App,t);function App(){_classCallCheck(this,App);var o=_possibleConstructorReturn(this,(App.__proto__||Object.getPrototypeOf(App)).call(this,'tabris.App'));if(arguments[0]!==!0){throw new Error('App can not be created')}o._create('tabris.App');return o}_createClass(App,[{key:'getResourceLocation',value:function getResourceLocation(o){if(!this._resourceBaseUrl){this._resourceBaseUrl=this._nativeGet('resourceBaseUrl')}var n=o!=null?'/'+normalizePath(''+o):'';return this._resourceBaseUrl+n}},{key:'dispose',value:function dispose(){throw new Error('tabris.app can not be disposed')}},{key:'reload',value:function reload(){this._nativeCall('reload',{})}},{key:'installPatch',value:function installPatch(o,n){if(typeof o!=='string'){throw new Error('parameter url is not a string')}if(!this._pendingPatchCallback){this._pendingPatchCallback=n||!0;this._nativeListen('patchInstall',!0);this._nativeCall('installPatch',{url:o})}else if(typeof n==='function'){n(new Error('Another installPatch operation is already pending.'))}}},{key:'_listen',value:function _listen(o,n){if(EVENT_TYPES.indexOf(o)!==-1){this._nativeListen(o,n)}else{_get(App.prototype.__proto__||Object.getPrototypeOf(App.prototype),'_listen',this).call(this,o,n)}}},{key:'_trigger',value:function _trigger(o){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(o==='patchInstall'){this._nativeListen('patchInstall',!1);var l=this._pendingPatchCallback;delete this._pendingPatchCallback;if(typeof l==='function'){if(n.error){l(new Error(n.error))}else{try{var s=n.success?JSON.parse(n.success):null;l(null,s)}catch(s){l(new Error('Failed to parse patch.json'))}}}}else{return _get(App.prototype.__proto__||Object.getPrototypeOf(App.prototype),'_trigger',this).call(this,o,n)}}},{key:'_validateCertificate',value:function _validateCertificate(o){var n=this.$pinnedCerts[o.host];if(n&&!n.some(function(l){return o.hashes.indexOf(l)!==-1})){o.preventDefault()}}},{key:'id',get:function(){return this._nativeGet('appId')}},{key:'version',get:function(){return this._nativeGet('version')}},{key:'versionCode',get:function(){return this._nativeGet('versionId')}}]);return App}(NativeObject);NativeObject.defineProperties(App.prototype,{pinnedCertificates:{type:'array',default:function(){return[]},set:function(t,o){this.$pinnedCerts=checkCertificates(o);this.on('certificatesReceived',this._validateCertificate,this);this._storeProperty(t,o);this._nativeSet(t,o)}}});function checkCertificates(t){var o={};for(var n of t){if(typeof n.host!=='string'){throw new Error('Invalid host for pinned certificate: '+n.host)}if(typeof n.hash!=='string'||!n.hash.startsWith('sha256/')){throw new Error('Invalid hash for pinned certificate: '+n.hash)}if(tabris.device.platform==='iOS'){if(!('algorithm'in n)){throw new Error('Missing algorithm for pinned certificate: '+n.host)}if(typeof n.algorithm!=='string'||CERTIFICATE_ALGORITHMS.indexOf(n.algorithm)===-1){throw new Error('Invalid algorithm for pinned certificate: '+n.algorithm)}}o[n.host]=o[n.host]||[];o[n.host].push(n.hash)}return o}function create$1(){return new App(!0)}function normalizePath(t){return t.split(/\/+/).map(function(o){if(o==='..'){throw new Error('Path must not contain \'..\'')}if(o==='.'){return''}return o}).filter(function(o){return!!o}).join('/')}var GestureRecognizer=function(t){_inherits(GestureRecognizer,t);function GestureRecognizer(o){_classCallCheck(this,GestureRecognizer);var n=_possibleConstructorReturn(this,(GestureRecognizer.__proto__||Object.getPrototypeOf(GestureRecognizer)).call(this));n._create('tabris.GestureRecognizer',o);return n}_createClass(GestureRecognizer,[{key:'_listen',value:function _listen(o,n){if(o==='gesture'){this._nativeListen(o,n)}else{_get(GestureRecognizer.prototype.__proto__||Object.getPrototypeOf(GestureRecognizer.prototype),'_listen',this).call(this,o,n)}}}]);return GestureRecognizer}(NativeObject);NativeObject.defineProperties(GestureRecognizer.prototype,{type:'string',target:'proxy',fingers:'natural',touches:'natural',duration:'natural',direction:'string'});var ANIMATABLE_PROPERTIES=['opacity','transform'],PROPERTIES={properties:{type:'any'},delay:{type:'natural'},duration:{type:'natural'},repeat:{type:'natural'},reverse:{type:'boolean'},easing:{type:['choice',['linear','ease-in','ease-out','ease-in-out']]},target:{type:'proxy'}},Animation=function(t){_inherits(Animation,t);function Animation(o){_classCallCheck(this,Animation);var n=_possibleConstructorReturn(this,(Animation.__proto__||Object.getPrototypeOf(Animation)).call(this));n._create('tabris.Animation',o);n._nativeListen('Completion',!0);return n}_createClass(Animation,[{key:'_trigger',value:function _trigger(o,n){if(o==='Completion'){this.target.off('dispose',this.abort,this);if(this._resolve){this._resolve()}this.dispose()}else{_get(Animation.prototype.__proto__||Object.getPrototypeOf(Animation.prototype),'_trigger',this).call(this,o,n)}}},{key:'start',value:function start(o,n){this.target.on('dispose',this.abort,this);this._resolve=o;this._reject=n;this._nativeCall('start')}},{key:'abort',value:function abort(){if(this._reject){this._reject()}this.dispose()}}]);return Animation}(NativeObject);NativeObject.defineProperties(Animation.prototype,PROPERTIES);function animate(t,o){var n=this,l={};for(var s in t){if(ANIMATABLE_PROPERTIES.indexOf(s)!==-1){try{l[s]=this._encodeProperty(this._getTypeDef(s),t[s]);this._storeProperty(s,l[s],o)}catch(p){console.warn(this+': Ignored invalid animation property value for "'+s+'"')}}else{console.warn(this+': Ignored invalid animation property "'+s+'"')}}for(var s in o){if(!(s in PROPERTIES)&&s!=='name'){console.warn(this+': Ignored invalid animation option "'+s+'"')}}return new Promise(function(s,p){new Animation(Object.assign({},o,{target:n,properties:l})).start(s,p)})}var EVENT_TYPES$1=['touchStart','touchMove','touchEnd','touchCancel','resize'],Widget=function(t){_inherits(Widget,t);function Widget(o){_classCallCheck(this,Widget);var n=_possibleConstructorReturn(this,(Widget.__proto__||Object.getPrototypeOf(Widget)).call(this));if(n.constructor===Widget){throw new Error('Cannot instantiate abstract Widget')}if(n._nativeType){n._create(n._nativeType,o)}return n}_createClass(Widget,[{key:'append',value:function append(){var o=this;this._checkDisposed();var n=function(l){if(!(l instanceof NativeObject)){throw new Error('Cannot append non-widget')}l._setParent(o)};if(arguments[0]instanceof WidgetCollection){arguments[0].toArray().forEach(n)}else if(Array.isArray(arguments[0])){arguments[0].forEach(n)}else{Array.prototype.forEach.call(arguments,n)}return this}},{key:'appendTo',value:function appendTo(o){this._checkDisposed();o=o instanceof WidgetCollection?o.first():o;if(!(o instanceof NativeObject)){throw new Error('Cannot append to non-widget')}this._setParent(o);return this}},{key:'insertBefore',value:function insertBefore(o){this._checkDisposed();o=o instanceof WidgetCollection?o.first():o;if(!(o instanceof NativeObject)){throw new Error('Cannot insert before non-widget')}var n=o.parent();if(!n){throw new Error('Cannot insert before orphan')}var l=n._children.indexOf(o);this._setParent(n,l);return this}},{key:'insertAfter',value:function insertAfter(o){this._checkDisposed();o=o instanceof WidgetCollection?o.first():o;if(!(o instanceof NativeObject)){throw new Error('Cannot insert after non-widget')}var n=o.parent();if(!n){throw new Error('Cannot insert after orphan')}var l=n._children.indexOf(o);this._setParent(n,l+1);return this}},{key:'detach',value:function detach(){this._checkDisposed();this._setParent(null);return this}},{key:'parent',value:function parent(){return this._parent||null}},{key:'children',value:function children(o){return new WidgetCollection(this._getSelectableChildren(),o)}},{key:'siblings',value:function siblings(o){var n=this,l=this._parent?this._parent._getSelectableChildren():[],s=l.filter(function(p){return p!==n});return new WidgetCollection(s,o)}},{key:'find',value:function find(o){return new WidgetCollection(this._getSelectableChildren(),o,!0)}},{key:'apply',value:function apply(o){var n=new WidgetCollection((this._children||[]).concat(this),'*',!0);if(o['*']){n.set(o['*'])}for(var l in o){if(l!=='*'&&l[0]!=='#'&&l[0]!=='.'){n.filter(l).set(o[l])}}for(var l in o){if(l[0]==='.'){n.filter(l).set(o[l])}}for(var l in o){if(l[0]==='#'){n.filter(l).set(o[l])}}return this}},{key:'_getContainer',value:function _getContainer(){return this}},{key:'_getSelectableChildren',value:function _getSelectableChildren(){return this._children}},{key:'_setParent',value:function _setParent(o,n){this._nativeSet('parent',o?types.proxy.encode(o._getContainer(this)):null);if(this._parent){this._parent._removeChild(this);Layout.addToQueue(this._parent)}this._parent=o;if(this._parent){this._parent._addChild(this,n);Layout.addToQueue(this._parent)}}},{key:'_acceptChild',value:function _acceptChild(){return!1}},{key:'_addChild',value:function _addChild(o,n){if(!this._acceptChild(o)){throw new Error(o+' could not be appended to '+this)}if(!this._children){this._children=[]}if(typeof n==='number'){this._children.splice(n,0,o);_get(Widget.prototype.__proto__||Object.getPrototypeOf(Widget.prototype),'_trigger',this).call(this,'addChild',{child:o,index:n})}else{this._children.push(o);_get(Widget.prototype.__proto__||Object.getPrototypeOf(Widget.prototype),'_trigger',this).call(this,'addChild',{child:o,index:this._children.length-1})}}},{key:'_removeChild',value:function _removeChild(o){if(this._children){var n=this._children.indexOf(o);if(n!==-1){this._children.splice(n,1);_get(Widget.prototype.__proto__||Object.getPrototypeOf(Widget.prototype),'_trigger',this).call(this,'removeChild',{child:o,index:n})}}}},{key:'_release',value:function _release(){if(this._children){for(var o=this._children.concat(),n=0;n<o.length;n++){o[n]._dispose(!0)}delete this._children}if(this._parent){this._parent._removeChild(this);Layout.addToQueue(this._parent);delete this._parent}}},{key:'_listen',value:function _listen(o,n){var l=this;if(this.gestures[o]){if(n){var s=Object.assign({target:this},this.gestures[o]),p=new GestureRecognizer(s).on('gesture',function(u){if(u.translation){u.translationX=u.translation.x;u.translationY=u.translation.y}if(u.velocity){u.velocityX=u.velocity.x;u.velocityY=u.velocity.y}_get(Widget.prototype.__proto__||Object.getPrototypeOf(Widget.prototype),'_trigger',l).call(l,o,u)});if(!this._recognizers){this._recognizers={}}this._recognizers[o]=p;this.on('dispose',p.dispose,p)}else if(this._recognizers&&o in this._recognizers){this._recognizers[o].dispose();delete this._recognizers[o]}}else if(o==='boundsChanged'){this._onoff('resize',n,this.$triggerChangeBounds)}else if(EVENT_TYPES$1.indexOf(o)!==-1){this._nativeListen(o,n)}else{_get(Widget.prototype.__proto__||Object.getPrototypeOf(Widget.prototype),'_listen',this).call(this,o,n)}}},{key:'_trigger',value:function _trigger(o,n){var l=this;if(o==='resize'){if(hasAndroidResizeBug()){setTimeout(function(){return _get(Widget.prototype.__proto__||Object.getPrototypeOf(Widget.prototype),'_trigger',l).call(l,o,types.bounds.decode(n.bounds))},0)}else{_get(Widget.prototype.__proto__||Object.getPrototypeOf(Widget.prototype),'_trigger',this).call(this,o,types.bounds.decode(n.bounds))}}else{return _get(Widget.prototype.__proto__||Object.getPrototypeOf(Widget.prototype),'_trigger',this).call(this,o,n)}}},{key:'$triggerChangeBounds',value:function $triggerChangeBounds(o){var{left:n,top:l,width:s,height:p}=o;_get(Widget.prototype.__proto__||Object.getPrototypeOf(Widget.prototype),'_trigger',this).call(this,'boundsChanged',{value:{left:n,top:l,width:s,height:p}})}},{key:'_flushLayout',value:function _flushLayout(){if(this._children){this._children.forEach(function(o){renderLayoutData.call(o)})}}},{key:'classList',get:function(){if(!this._classList){this._classList=[]}return this._classList}}]);return Widget}(NativeObject);NativeObject.defineProperties(Widget.prototype,{enabled:{type:'boolean',default:!0},visible:{type:'boolean',default:!0},layoutData:{type:'layoutData',set:function(t,o){this._layoutData=o;if(this._parent){Layout.addToQueue(this._parent)}},get:function(){return this._layoutData||null}},left:{type:'edge',get:getLayoutProperty,set:setLayoutProperty},right:{type:'edge',get:getLayoutProperty,set:setLayoutProperty},top:{type:'edge',get:getLayoutProperty,set:setLayoutProperty},bottom:{type:'edge',get:getLayoutProperty,set:setLayoutProperty},width:{type:'dimension',get:getLayoutProperty,set:setLayoutProperty},height:{type:'dimension',get:getLayoutProperty,set:setLayoutProperty},centerX:{type:'dimension',get:getLayoutProperty,set:setLayoutProperty},centerY:{type:'dimension',get:getLayoutProperty,set:setLayoutProperty},baseline:{type:'sibling',get:getLayoutProperty,set:setLayoutProperty},elevation:{type:'number',default:0},font:{type:'font',set:function(t,o){this._nativeSet(t,o===void 0?null:o);this._storeProperty(t,o)},default:null},backgroundImage:{type:'image'},bounds:{type:'bounds',readonly:!0},background:{type:'color',set:function(t,o){this._nativeSet(t,o===void 0?null:o);this._storeProperty(t,o)}},textColor:{type:'color',set:function(t,o){this._nativeSet('foreground',o===void 0?null:o);this._storeProperty(t,o)},get:function(t){var o=this._getStoredProperty(t);if(o===void 0){o=this._nativeGet('foreground')}return o}},opacity:{type:'opacity',default:1},transform:{type:'transform',default:function(){return{rotation:0,scaleX:1,scaleY:1,translationX:0,translationY:0,translationZ:0}}},highlightOnTouch:{type:'boolean',default:!1},cornerRadius:{type:'number',default:0},id:{type:'string',set:function(t,o){this._storeProperty(t,o)},get:function(t){return this._getStoredProperty(t)}},class:{type:'string',set:function(t,o){this._classList=o.trim().split(/\s+/)},get:function(){return this.classList.join(' ')}},gestures:{set:function(t,o){this._gestures=Object.assign({},defaultGestures,o)},get:function(){if(!this._gestures){this._gestures=Object.assign({},defaultGestures)}return this._gestures}},win_theme:{type:['choice',['default','light','dark']],default:'default'}});Widget.prototype.animate=animate;function hasAndroidResizeBug(){if(!('cache'in hasAndroidResizeBug)){hasAndroidResizeBug.cache=tabris.device.platform==='Android'&&tabris.device.version<=17}return hasAndroidResizeBug.cache}var defaultGestures={tap:{type:'tap'},longpress:{type:'longpress'},pan:{type:'pan'},panLeft:{type:'pan',direction:'left'},panRight:{type:'pan',direction:'right'},panUp:{type:'pan',direction:'up'},panDown:{type:'pan',direction:'down'},panHorizontal:{type:'pan',direction:'horizontal'},panVertical:{type:'pan',direction:'vertical'},swipeLeft:{type:'swipe',direction:'left'},swipeRight:{type:'swipe',direction:'right'},swipeUp:{type:'swipe',direction:'up'},swipeDown:{type:'swipe',direction:'down'}};function renderLayoutData(){if(this._layoutData){var t=Layout.checkConsistency(this._layoutData);this._nativeSet('layoutData',Layout.resolveReferences(t,this))}}function setLayoutProperty(t,o){if(!this._layoutData){this._layoutData={}}if(o==null){delete this._layoutData[t]}else{this._layoutData[t]=o}if(this._parent){Layout.addToQueue(this._parent)}}function getLayoutProperty(t){return this._layoutData&&this._layoutData[t]!=null?this._layoutData[t]:null}var Composite=function(t){_inherits(Composite,t);function Composite(){_classCallCheck(this,Composite);return _possibleConstructorReturn(this,(Composite.__proto__||Object.getPrototypeOf(Composite)).apply(this,arguments))}_createClass(Composite,[{key:'_acceptChild',value:function _acceptChild(){return!0}},{key:'_nativeType',get:function(){return'tabris.Composite'}}]);return Composite}(Widget),ContentView=function(t){_inherits(ContentView,t);function ContentView(){_classCallCheck(this,ContentView);if(arguments[0]!==!0){throw new Error('ContentView can not be created')}return _possibleConstructorReturn(this,(ContentView.__proto__||Object.getPrototypeOf(ContentView)).call(this))}_createClass(ContentView,[{key:'_create',value:function _create(o,n){_get(ContentView.prototype.__proto__||Object.getPrototypeOf(ContentView.prototype),'_create',this).call(this,o,n);this._nativeSet('root',!0)}},{key:'_setParent',value:function _setParent(o,n){if(this._parent){throw new Error('Parent of ContentView can not be changed')}_get(ContentView.prototype.__proto__||Object.getPrototypeOf(ContentView.prototype),'_setParent',this).call(this,o,n)}},{key:'_dispose',value:function _dispose(){throw new Error('ContentView can not be disposed')}}]);return ContentView}(Composite);function create$3(){return new ContentView(!0)}var StatusBar=function(t){_inherits(StatusBar,t);function StatusBar(){_classCallCheck(this,StatusBar);if(arguments[0]!==!0){throw new Error('StatusBar can not be created')}return _possibleConstructorReturn(this,(StatusBar.__proto__||Object.getPrototypeOf(StatusBar)).call(this))}_createClass(StatusBar,[{key:'_setParent',value:function _setParent(o,n){if(this._parent){throw new Error('Parent of StatusBar can not be changed')}_get(StatusBar.prototype.__proto__||Object.getPrototypeOf(StatusBar.prototype),'_setParent',this).call(this,o,n)}},{key:'_dispose',value:function _dispose(){throw new Error('StatusBar can not be disposed')}},{key:'_nativeType',get:function(){return'tabris.StatusBar'}}]);return StatusBar}(Widget);NativeObject.defineProperties(StatusBar.prototype,{theme:{type:['choice',['default','light','dark']],default:'default'},displayMode:{type:['choice',['default','float','hide']],default:'default'},height:{type:'number',nocache:!0,readonly:!0},background:{type:'color',nocache:!0}});function create$4(){return new StatusBar(!0)}var NavigationBar=function(t){_inherits(NavigationBar,t);function NavigationBar(){_classCallCheck(this,NavigationBar);if(arguments[0]!==!0){throw new Error('NavigationBar can not be created')}return _possibleConstructorReturn(this,(NavigationBar.__proto__||Object.getPrototypeOf(NavigationBar)).call(this))}_createClass(NavigationBar,[{key:'_setParent',value:function _setParent(o,n){if(this._parent){throw new Error('Parent of NavigationBar can not be changed')}_get(NavigationBar.prototype.__proto__||Object.getPrototypeOf(NavigationBar.prototype),'_setParent',this).call(this,o,n)}},{key:'_dispose',value:function _dispose(){throw new Error('NavigationBar can not be disposed')}},{key:'_nativeType',get:function(){return'tabris.NavigationBar'}}]);return NavigationBar}(Widget);NativeObject.defineProperties(NavigationBar.prototype,{displayMode:{type:['choice',['default','float','hide']],default:'default'},height:{type:'number',nocache:!0,readonly:!0},background:{type:'color',nocache:!0}});function create$5(){return new NavigationBar(!0)}var Drawer=function(t){_inherits(Drawer,t);function Drawer(){_classCallCheck(this,Drawer);if(arguments[0]!==!0){throw new Error('Drawer can not be created')}return _possibleConstructorReturn(this,(Drawer.__proto__||Object.getPrototypeOf(Drawer)).call(this))}_createClass(Drawer,[{key:'_setParent',value:function _setParent(o,n){if(this._parent){throw new Error('Parent of Drawer can not be changed')}_get(Drawer.prototype.__proto__||Object.getPrototypeOf(Drawer.prototype),'_setParent',this).call(this,o,n)}},{key:'_listen',value:function _listen(o,n){if(o==='open'||o==='close'){this._nativeListen(o,n)}else{_get(Drawer.prototype.__proto__||Object.getPrototypeOf(Drawer.prototype),'_listen',this).call(this,o,n)}}},{key:'_dispose',value:function _dispose(){throw new Error('Drawer can not be disposed')}},{key:'open',value:function open(){this._nativeCall('open',{});return this}},{key:'close',value:function close(){this._nativeCall('close',{});return this}},{key:'_nativeType',get:function(){return'tabris.Drawer'}}]);return Drawer}(Composite);NativeObject.defineProperties(Drawer.prototype,{enabled:{type:'boolean',default:!1},win_targetView:{type:'proxy'},win_displayMode:{type:['choice',['overlay','compactOverlay','inline','compactInline']],default:'overlay'}});function create$6(){return new Drawer(!0)}var Ui=function(t){_inherits(Ui,t);function Ui(){_classCallCheck(this,Ui);if(arguments[0]!==!0){throw new Error('Ui can not be created')}var o=_possibleConstructorReturn(this,(Ui.__proto__||Object.getPrototypeOf(Ui)).call(this));o._appendNamedChild('contentView',create$3());o._appendNamedChild('statusBar',create$4());o._appendNamedChild('navigationBar',create$5());o._appendNamedChild('drawer',create$6());return o}_createClass(Ui,[{key:'_acceptChild',value:function _acceptChild(o){return o===this.contentView||o===this.statusBar||o===this.navigationBar||o===this.drawer}},{key:'_appendNamedChild',value:function _appendNamedChild(o,n){Object.defineProperty(this,o,{value:n});this.append(n)}},{key:'_setParent',value:function _setParent(){throw new Error('Parent of tabris.ui can not be changed')}},{key:'_dispose',value:function _dispose(){throw new Error('Ui can not be disposed')}},{key:'_nativeType',get:function(){return'tabris.Ui'}}]);return Ui}(Composite);function create$2(){return new Ui(!0)}NativeObject.defineProperties(Ui.prototype,{win_theme:{type:['choice',['default','light','dark']],default:'light'}});var PHASE_CONSTANTS={NONE:{value:0},CAPTURING_PHASE:{value:1},AT_TARGET:{value:2},BUBBLING_PHASE:{value:3}},Event=function(){function Event(t,o){_classCallCheck(this,Event);if(arguments.length<1){throw new Error('Not enough arguments to Event')}this.$timeStamp=Date.now();this.$type=t||'';this.$bubbles=o&&!!o.bubbles||!1;this.$cancelable=o&&!!o.cancelable||!1;this.$target=null;this.$defaultPrevented=!1}_createClass(Event,[{key:'initEvent',value:function initEvent(t,o,n){if(arguments.length<3){throw new Error('Not enough arguments to initEvent')}this.$type=t+'';this.$bubbles=!!o;this.$cancelable=!!n}},{key:'stopPropagation',value:function stopPropagation(){}},{key:'stopImmediatePropagation',value:function stopImmediatePropagation(){}},{key:'preventDefault',value:function preventDefault(){if(this.$cancelable){this.$defaultPrevented=!0}}},{key:'type',get:function(){return this.$type}},{key:'timeStamp',get:function(){return this.$timeStamp}},{key:'bubbles',get:function(){return this.$bubbles}},{key:'cancelable',get:function(){return this.$cancelable}},{key:'target',get:function(){return this.$target}},{key:'currentTarget',get:function(){return this.$target}},{key:'defaultPrevented',get:function(){return this.$defaultPrevented}},{key:'eventPhase',get:function(){return 0}},{key:'isTrusted',get:function(){return!1}}]);return Event}();Object.defineProperties(Event,PHASE_CONSTANTS);Object.defineProperties(Event.prototype,PHASE_CONSTANTS);function addDOMEventTargetMethods(t){if(typeof t.addEventListener==='function'){return}var o;t.addEventListener=function(n,l){if(arguments.length<2){throw new Error('Not enough arguments to addEventListener')}if(!o){o=[]}if(!(n in o)){o[n]=[]}if(!(o[n].indexOf(l)!==-1)){o[n].push(l)}};t.removeEventListener=function(n,l){if(arguments.length<2){throw new Error('Not enough arguments to removeEventListener')}if(o&&n in o){var s=o[n].indexOf(l);if(s!==-1){o[n].splice(s,1)}}};t.dispatchEvent=function(n){if(arguments.length<1){throw new Error('Not enough arguments to dispatchEvent')}if(!(n instanceof Event)){throw new Error('Invalid event given to dispatchEvent')}n.$target=t;if(o&&n.type in o){for(var l of o[n.type]){l.call(this,n)}}return!n.defaultPrevented}}function defineEventHandlerProperties(t,o){o.forEach(function(n){return defineEventHandlerProperty(t,n)})}function defineEventHandlerProperty(t,o){var l=null;Object.defineProperty(t,'on'+o,{get:function(){return l},set:function(s){if(typeof s==='function'){if(l){t.removeEventListener(o,l)}l=s;t.addEventListener(o,l)}}})}function addDOMDocument(t){var o=function(){function HTMLElement(n){_classCallCheck(this,HTMLElement);this.tagName=(n||'').toUpperCase();this.children=[]}_createClass(HTMLElement,[{key:'setAttribute',value:function setAttribute(){}},{key:'appendChild',value:function appendChild(n){this.children.push(n);handleElementInserted(this,n,t);return n}},{key:'cloneNode',value:function cloneNode(){return new HTMLElement}},{key:'lastChild',value:function lastChild(){return new HTMLElement}}]);return HTMLElement}();t.document={documentElement:{},createDocumentFragment:function(){return new o},createElement:function(n){return new o(n)},location:{href:''},readyState:'loading',head:new o('head'),getElementsByTagName:function(n){return this.head.children.filter(function(l){return l.tagName===n.toUpperCase()})},createEvent:function(n){return new Event(n)}};addDOMEventTargetMethods(t.document);if(typeof t.location==='undefined'){t.location=t.document.location}tabris.once('start',function(){t.document.readyState='complete';var n=new Event('DOMContentLoaded',!1,!1);t.document.dispatchEvent(n)})}function handleElementInserted(t,o,n){if(t.tagName==='HEAD'&&o.tagName==='SCRIPT'&&o.src){var l;try{l=tabris._client.loadAndExecute(o.src,'','')}catch(s){console.error('Error loading '+o.src+':',s);console.log(s.stack);if(typeof o.onerror==='function'){o.onerror.call(n,s)}return}if(l.loadError){if(typeof o.onerror==='function'){o.onerror.call(n,new Error('Could not load '+o.src))}}else if(typeof o.onload==='function'){o.onload.call(n)}}}var Timer=function(t){_inherits(Timer,t);function Timer(o){_classCallCheck(this,Timer);var n=_possibleConstructorReturn(this,(Timer.__proto__||Object.getPrototypeOf(Timer)).call(this));n._create('tabris.Timer',o);n._nativeListen('Run',!0);return n}return Timer}(NativeObject);NativeObject.defineProperties(Timer.prototype,{delay:'any',repeat:'any'});function addWindowTimerMethods(t){if(typeof t.setTimeout==='function'){return}var o=0,n={};function createTimer(l,s,p,u){var _=o++,h=function(){var v=new Timer({delay:s,repeat:p}).on('Run',function(){l.apply(t,u);if(!p){v.dispose();delete n[_]}});v._nativeCall('start');n[_]=v};if(tabris.started){h()}else{tabris.once('start',h)}return _}t.setTimeout=function(l,s){if(arguments.length<1){throw new TypeError('Not enough arguments to setTimeout')}if(typeof l!=='function'){throw new TypeError('Illegal argument to setTimeout: not a function')}var p=Array.prototype.slice.call(arguments,2);return createTimer(l,adjustDelay(s),!1,p)};t.setInterval=function(l,s){if(arguments.length<1){throw new TypeError('Not enough arguments to setInterval')}if(typeof l!=='function'){throw new TypeError('Illegal argument to setInterval: not a function')}var p=Array.prototype.slice.call(arguments,2);return createTimer(l,adjustDelay(s),!0,p)};t.clearTimeout=t.clearInterval=function(l){var s=n[l];if(s){s._nativeCall('cancel',{});s.dispose();delete n[l]}}}function adjustDelay(t){return typeof t==='number'&&isFinite(t)?Math.max(0,Math.round(t)):0}var ClientStore=function(t){_inherits(ClientStore,t);function ClientStore(){_classCallCheck(this,ClientStore);var o=_possibleConstructorReturn(this,(ClientStore.__proto__||Object.getPrototypeOf(ClientStore)).call(this,'tabris.ClientStore'));o._create('tabris.ClientStore');return o}return ClientStore}(NativeObject),SecureStore=function(t){_inherits(SecureStore,t);function SecureStore(){_classCallCheck(this,SecureStore);var o=_possibleConstructorReturn(this,(SecureStore.__proto__||Object.getPrototypeOf(SecureStore)).call(this,'tabris.SecureStore'));o._create('tabris.SecureStore');return o}return SecureStore}(NativeObject),encode=types.string.encode,Storage=function(){function Storage(){_classCallCheck(this,Storage);var t=arguments[0];if(!(t instanceof NativeObject)){throw new Error('Cannot instantiate Storage')}Object.defineProperty(this,'_proxy',{value:t})}_createClass(Storage,[{key:'setItem',value:function setItem(t,o){if(arguments.length<2){throw new TypeError('Not enough arguments to \'setItem\'')}this._proxy._nativeCall('add',{key:encode(t),value:encode(o)})}},{key:'getItem',value:function getItem(t){if(arguments.length<1){throw new TypeError('Not enough arguments to \'getItem\'')}var o=this._proxy._nativeCall('get',{key:encode(t)});return o===void 0?null:o}},{key:'removeItem',value:function removeItem(t){if(arguments.length<1){throw new TypeError('Not enough arguments to \'removeItem\'')}this._proxy._nativeCall('remove',{keys:[encode(t)]})}},{key:'clear',value:function clear(){this._proxy._nativeCall('clear')}}]);return Storage}();function create$7(t){var o=t?new SecureStore:new ClientStore;return new Storage(o)}var Action=function(t){_inherits(Action,t);function Action(){_classCallCheck(this,Action);return _possibleConstructorReturn(this,(Action.__proto__||Object.getPrototypeOf(Action)).apply(this,arguments))}_createClass(Action,[{key:'_listen',value:function _listen(o,n){if(o==='select'){this._nativeListen(o,n)}else{_get(Action.prototype.__proto__||Object.getPrototypeOf(Action.prototype),'_listen',this).call(this,o,n)}}},{key:'_nativeType',get:function(){return'tabris.Action'}}]);return Action}(Widget);NativeObject.defineProperties(Action.prototype,{image:{type:'image',default:null},placementPriority:{type:['choice',['low','high','normal']],set:function(t,o){this._nativeSet(t,o.toUpperCase());this._storeProperty(t,o)},default:'normal'},title:{type:'string',default:''},win_symbol:{type:'string',default:''}});var ActivityIndicator=function(t){_inherits(ActivityIndicator,t);function ActivityIndicator(){_classCallCheck(this,ActivityIndicator);return _possibleConstructorReturn(this,(ActivityIndicator.__proto__||Object.getPrototypeOf(ActivityIndicator)).apply(this,arguments))}_createClass(ActivityIndicator,[{key:'_nativeType',get:function(){return'tabris.ActivityIndicator'}}]);return ActivityIndicator}(Widget),AlertDialog=function(t){_inherits(AlertDialog,t);function AlertDialog(o){_classCallCheck(this,AlertDialog);var n=_possibleConstructorReturn(this,(AlertDialog.__proto__||Object.getPrototypeOf(AlertDialog)).call(this));n._create('tabris.AlertDialog',o);n._nativeListen('close',!0);return n}_createClass(AlertDialog,[{key:'_trigger',value:function _trigger(o,n){if(o==='close'){n.button=n.button||'';if(n.button){_get(AlertDialog.prototype.__proto__||Object.getPrototypeOf(AlertDialog.prototype),'_trigger',this).call(this,'close'+capitalizeFirstChar(n.button),n)}_get(AlertDialog.prototype.__proto__||Object.getPrototypeOf(AlertDialog.prototype),'_trigger',this).call(this,'close',n);this.dispose()}else{return _get(AlertDialog.prototype.__proto__||Object.getPrototypeOf(AlertDialog.prototype),'_trigger',this).call(this,o,n)}}},{key:'open',value:function open(){if(this.isDisposed()){throw new Error('Can not open a dialog that was closed')}this._nativeCall('open');return this}},{key:'close',value:function close(){this.dispose();return this}}]);return AlertDialog}(NativeObject);NativeObject.defineProperties(AlertDialog.prototype,{title:{type:'string',default:''},message:{type:'string',default:''},buttons:{type:{encode:function(t){if(typeof t!=='object'){throw new Error('value is not an object')}var o={};if('ok'in t){o.ok=t.ok+''}if('cancel'in t){o.cancel=t.cancel+''}if('neutral'in t){o.neutral=t.neutral+''}return o}},default:function(){return{}}}});var Button=function(t){_inherits(Button,t);function Button(){_classCallCheck(this,Button);return _possibleConstructorReturn(this,(Button.__proto__||Object.getPrototypeOf(Button)).apply(this,arguments))}_createClass(Button,[{key:'_listen',value:function _listen(o,n){if(o==='select'){this._nativeListen(o,n)}else{_get(Button.prototype.__proto__||Object.getPrototypeOf(Button.prototype),'_listen',this).call(this,o,n)}}},{key:'_nativeType',get:function(){return'tabris.Button'}}]);return Button}(Widget);NativeObject.defineProperties(Button.prototype,{alignment:{type:['choice',['left','right','center']],default:'center'},image:{type:'image',default:null},text:{type:'string',default:''}});var ImageData=function ImageData(){_classCallCheck(this,ImageData);if(arguments.length<2){throw new TypeError('Not enough arguments to ImageData')}var t,o,n;if(arguments[0]instanceof Uint8ClampedArray){t=checkArray(arguments[0]);o=checkSize(arguments[1]);n=arguments.length>2?checkSize(arguments[2]):t.byteLength/4/o;if(t.byteLength!==o*n*4){throw new Error('Wrong array size')}}else{o=checkSize(arguments[0]);n=checkSize(arguments[1]);t=new Uint8ClampedArray(o*n*4)}Object.defineProperties(this,{data:{value:t},width:{value:o},height:{value:n}})};function checkArray(t){if(t.byteLength%4!==0){throw new Error('Illegal array length')}return t}function checkSize(t){var o=Math.floor(t);if(o<=0||!isFinite(o)){throw new Error('Illegal size for ImageData')}return o}var GC=function(t){_inherits(GC,t);function GC(o){_classCallCheck(this,GC);var n=_possibleConstructorReturn(this,(GC.__proto__||Object.getPrototypeOf(GC)).call(this));n._create('tabris.GC',o);n._operations=[];n._opCodes=[];n._newOpCodes=[];n._doubles=[];n._booleans=[];n._strings=[];n._ints=[];n._isIOS=tabris.device.platform==='iOS';var l=function(){return n.flush()};tabris.on('flush',l);n.on('dispose',function(){return tabris.off('flush',l)});return n}_createClass(GC,[{key:'init',value:function init(o){this._nativeCall('init',o)}},{key:'getImageData',value:function getImageData(o,n,l,s){var p=this._nativeCall('getImageData',{x:o,y:n,width:l,height:s});return p instanceof Uint8ClampedArray?p:new Uint8ClampedArray(p)}},{key:'putImageData',value:function putImageData(o,n,l){this._nativeCall('putImageData',{data:o.data,width:o.width,height:o.height,x:n,y:l})}},{key:'addOperation',value:function addOperation(o){if(this._isIOS){this._operations.push([o])}else{if(this._opCodes.indexOf(o)<0){this._newOpCodes.push(o);this._opCodes.push(o)}this._operations.push(this._opCodes.indexOf(o))}}},{key:'addBoolean',value:function addBoolean(){var o=this._isIOS?this._operations[this._operations.length-1]:this._booleans;Array.prototype.push.apply(o,arguments)}},{key:'addDouble',value:function addDouble(){var o=this._isIOS?this._operations[this._operations.length-1]:this._doubles;Array.prototype.push.apply(o,arguments)}},{key:'addInt',value:function addInt(){var o=this._isIOS?this._operations[this._operations.length-1]:this._ints;Array.prototype.push.apply(o,arguments)}},{key:'addString',value:function addString(){var o=this._isIOS?this._operations[this._operations.length-1]:this._strings;Array.prototype.push.apply(o,arguments)}},{key:'flush',value:function flush(){if(this._operations.length>0){if(this._isIOS){this._nativeCall('draw',{operations:this._operations})}else{this._nativeCall('draw',{packedOperations:[this._newOpCodes,this._operations,this._doubles,this._booleans,this._strings,this._ints]})}this._newOpCodes=[];this._operations=[];this._doubles=[];this._booleans=[];this._strings=[];this._ints=[]}}}]);return GC}(NativeObject);NativeObject.defineProperties(GC.prototype,{parent:'proxy'});var CanvasContext=function(){function CanvasContext(t){_classCallCheck(this,CanvasContext);this._gc=t;this._state=createState();this._savedStates=[];this.canvas={width:0,height:0,style:{}};for(var o in properties){defineProperty(this,o)}}_createClass(CanvasContext,[{key:'measureText',value:function measureText(t){return{width:t.length*5+5}}},{key:'getImageData',value:function getImageData(t,o,n,l){checkRequiredArgs(arguments,4,'CanvasContext.getImageData');this._gc.flush();var s=this._gc.getImageData(t,o,n,l);return new ImageData(s,n,l)}},{key:'putImageData',value:function putImageData(t,o,n){checkRequiredArgs(arguments,3,'CanvasContext.putImageData');this._gc.flush();this._gc.putImageData(t,o,n)}},{key:'createImageData',value:function createImageData(t,o){if(arguments[0]instanceof ImageData){var n=arguments[0];t=n.width;o=n.height}else{checkRequiredArgs(arguments,2,'CanvasContext.createImageData')}return new ImageData(t,o)}},{key:'_init',value:function _init(t,o){this.canvas.width=t;this.canvas.height=o;this._gc.init({width:t,height:o,font:[['sans-serif'],12,!1,!1],fillStyle:[0,0,0,255],strokeStyle:[0,0,0,255]})}}]);return CanvasContext}();defineMethod('save',0,function(){this._savedStates.push(Object.assign({},this._state))});defineMethod('restore',0,function(){this._state=this._savedStates.pop()||this._state});defineMethod('beginPath');defineMethod('closePath');defineMethod('lineTo',2,function(t,o){this._gc.addDouble(t,o)});defineMethod('moveTo',2,function(t,o){this._gc.addDouble(t,o)});defineMethod('bezierCurveTo',6,function(t,o,n,l,s,p){this._gc.addDouble(t,o,n,l,s,p)});defineMethod('quadraticCurveTo',4,function(t,o,n,l){this._gc.addDouble(t,o,n,l)});defineMethod('rect',4,function(t,o,n,l){this._gc.addDouble(t,o,n,l)});defineMethod('arc',5,function(t,o,n,l,s,p){this._gc.addDouble(t,o,n,l,s);this._gc.addBoolean(!!p)});defineMethod('arcTo',5,function(t,o,n,l,s){this._gc.addDouble(t,o,n,l,s)});defineMethod('scale',2,function(t,o){this._gc.addDouble(t,o)});defineMethod('rotate',1,function(t){this._gc.addDouble(t)});defineMethod('translate',2,function(t,o){this._gc.addDouble(t,o)});defineMethod('transform',6,function(t,o,n,l,s,p){this._gc.addDouble(t,o,n,l,s,p)});defineMethod('setTransform',6,function(t,o,n,l,s,p){this._gc.addDouble(t,o,n,l,s,p)});defineMethod('clearRect',4,function(t,o,n,l){this._gc.addDouble(t,o,n,l)});defineMethod('fillRect',4,function(t,o,n,l){this._gc.addDouble(t,o,n,l)});defineMethod('strokeRect',4,function(t,o,n,l){this._gc.addDouble(t,o,n,l)});defineMethod('fillText',3,function(t,o,n){this._gc.addString(t);this._gc.addBoolean(!1,!1,!1);this._gc.addDouble(o,n)});defineMethod('strokeText',3,function(t,o,n){this._gc.addString(t);this._gc.addBoolean(!1,!1,!1);this._gc.addDouble(o,n)});defineMethod('fill');defineMethod('stroke');CanvasContext.getContext=function(t,o,n){if(!t._gc){t._gc=new GC({parent:t})}if(!t._ctx){t._ctx=new CanvasContext(t._gc)}t._ctx._init(o,n);return t._ctx};var properties={lineWidth:{init:1,encode:function(t){if(t>0){return t}throw new Error(t)},decode:passThrough,addOperations:function(t){this._gc.addDouble(t)}},lineCap:{init:'butt',values:toObject(['butt','round','square']),encode:checkValue$1,decode:passThrough,addOperations:function(t){this._gc.addString(t)}},lineJoin:{init:'miter',values:toObject(['bevel','miter','round']),encode:checkValue$1,decode:passThrough,addOperations:function(t){this._gc.addString(t)}},fillStyle:{init:[0,0,0,255],encode:colorStringToArray,decode:colorArrayToString,addOperations:function(t){this._gc.addInt(t[0],t[1],t[2],t[3])}},strokeStyle:{init:[0,0,0,255],encode:colorStringToArray,decode:colorArrayToString,addOperations:function(t){this._gc.addInt(t[0],t[1],t[2],t[3])}},textAlign:{init:'start',values:toObject(['start','end','left','right','center']),encode:checkValue$1,decode:passThrough,addOperations:function(t){this._gc.addString(t)}},textBaseline:{init:'alphabetic',values:toObject(['top','hanging','middle','alphabetic','ideographic','bottom']),encode:checkValue$1,decode:passThrough,addOperations:function(t){this._gc.addString(t)}}};function passThrough(t){return t}function checkValue$1(t){if(t in this.values){return t}throw new Error(t)}function toObject(t){var o={};t.forEach(function(n){o[n]=!0});return o}function createState(){var t={};for(var o in properties){t[o]=properties[o].init}return t}function defineMethod(t,o,n){CanvasContext.prototype[t]=function(){checkRequiredArgs(arguments,o,'CanvasContext.'+t);this._gc.addOperation(t);if(n){n.apply(this,arguments)}}}function defineProperty(t,o){var n=properties[o];Object.defineProperty(t,o,{get:function(){return n.decode(t._state[o])},set:function(l){try{t._state[o]=n.encode(l);t._gc.addOperation(o);n.addOperations.call(t,t._state[o])}catch(s){console.warn('Unsupported value for '+o+': '+l)}}})}function checkRequiredArgs(t,o,n){if(t.length<o){throw new Error('Not enough arguments to '+n)}}var Canvas=function(t){_inherits(Canvas,t);function Canvas(){_classCallCheck(this,Canvas);return _possibleConstructorReturn(this,(Canvas.__proto__||Object.getPrototypeOf(Canvas)).apply(this,arguments))}_createClass(Canvas,[{key:'getContext',value:function getContext(o,n,l){if(o==='2d'){return CanvasContext.getContext(this,n,l)}return null}},{key:'_nativeType',get:function(){return'tabris.Canvas'}}]);return Canvas}(Composite),CheckBox=function(t){_inherits(CheckBox,t);function CheckBox(){_classCallCheck(this,CheckBox);return _possibleConstructorReturn(this,(CheckBox.__proto__||Object.getPrototypeOf(CheckBox)).apply(this,arguments))}_createClass(CheckBox,[{key:'_listen',value:function _listen(o,n){if(o==='checkedChanged'){this._onoff('select',n,this.$triggerChangeChecked)}else if(o==='select'){this._nativeListen(o,n)}else{_get(CheckBox.prototype.__proto__||Object.getPrototypeOf(CheckBox.prototype),'_listen',this).call(this,o,n)}}},{key:'$triggerChangeChecked',value:function $triggerChangeChecked(o){var{checked:n}=o;this._triggerChangeEvent('checked',n)}},{key:'_nativeType',get:function(){return'tabris.CheckBox'}}]);return CheckBox}(Widget);NativeObject.defineProperties(CheckBox.prototype,{text:{type:'string',default:''},checked:{type:'boolean',nocache:!0}});var EVENT_TYPES$2=['refresh','select','scroll'],CollectionView=function(t){_inherits(CollectionView,t);function CollectionView(o){_classCallCheck(this,CollectionView);var n=_possibleConstructorReturn(this,(CollectionView.__proto__||Object.getPrototypeOf(CollectionView)).call(this,o));n._nativeListen('requestinfo',!0);n._nativeListen('createitem',!0);n._nativeListen('populateitem',!0);tabris.on('flush',n._reload,n);n.on('dispose',function(){return tabris.off('flush',n._reload,n)});return n}_createClass(CollectionView,[{key:'reveal',value:function reveal(o){o=this._checkIndex(o);if(o>=0&&o<this.itemCount){this._nativeCall('reveal',{index:o})}}},{key:'refresh',value:function refresh(o){if(arguments.length===0){this._nativeCall('update',{reload:[0,this.itemCount]});return}o=this._checkIndex(o);if(o>=0&&o<this.itemCount){this._nativeCall('update',{reload:[o,1]})}}},{key:'insert',value:function insert(o){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;o=Math.min(Math.max(0,this._checkIndex(o)),this.itemCount);if(!isNumber$1(n)||n<=0){throw new Error('Invalid insert count')}this._storeProperty('itemCount',this.itemCount+n);this._nativeCall('update',{insert:[o,n]})}},{key:'remove',value:function remove(o){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;o=this._checkIndex(o);if(isNumber$1(n)&&n>=0){n=Math.min(n,this.itemCount-o)}else{throw new Error('Invalid remove count')}if(o>=0&&o<this.itemCount&&n>0){this._storeProperty('itemCount',this.itemCount-n);this._nativeCall('update',{remove:[o,n]})}}},{key:'_reload',value:function _reload(){if(this._needsReload){delete this._needsReload;this._nativeCall('reload',{items:this.itemCount})}}},{key:'_checkIndex',value:function _checkIndex(o){if(!isNumber$1(o)){throw new Error('Invalid index')}return o<0?o+this.itemCount:o}},{key:'_listen',value:function _listen(o,n){if(o==='firstVisibleIndexChanged'){this._onoff('scroll',n,triggerChangeFirstVisibleIndex)}else if(o==='lastVisibleIndexChanged'){this._onoff('scroll',n,triggerChangeLastVisibleIndex)}else if(EVENT_TYPES$2.indexOf(o)!==-1){this._nativeListen(o,n)}else{_get(CollectionView.prototype.__proto__||Object.getPrototypeOf(CollectionView.prototype),'_listen',this).call(this,o,n)}}},{key:'_trigger',value:function _trigger(o,n){if(o==='requestinfo'){var l=resolveProperty(this,'cellType',n.index),s=resolveProperty(this,'cellHeight',n.index,l);return{type:encodeCellType(this,l),height:encodeCellHeight(s)}}else if(o==='createitem'){var l=this._createCell(n.type);return l.cid}else if(o==='populateitem'){this.updateCell(tabris._proxies.find(n.widget),n.index)}else if(o==='select'){return _get(CollectionView.prototype.__proto__||Object.getPrototypeOf(CollectionView.prototype),'_trigger',this).call(this,'select',{index:n.index})}else{return _get(CollectionView.prototype.__proto__||Object.getPrototypeOf(CollectionView.prototype),'_trigger',this).call(this,o,n)}}},{key:'_createCell',value:function _createCell(o){var n=this.createCell(decodeCellType(this,o));if(!(n instanceof Widget)){throw new Error('Created cell is not a widget')}if(n._parent){throw new Error('Created cell already has a parent')}n._parent=this;this._addChild(n);n._setParent=function(){return console.warn('Cannot re-parent collection view cell')};n.dispose=function(){return console.warn('Cannot dispose of collection view cell')};return n}},{key:'_nativeType',get:function(){return'tabris.CollectionView'}}]);return CollectionView}(Composite);NativeObject.defineProperties(CollectionView.prototype,{itemCount:{type:'natural',default:0,set:function(t,o){if(o!==this.itemCount){this._storeProperty(t,o);this._needsReload=!0}}},cellType:{type:'any',default:null,set:function(t,o){if(o!==this.cellType){this._storeProperty(t,o);this._needsReload=!0}}},cellHeight:{type:'any',default:'auto',set:function(t,o){if(o!==this.cellHeight){this._storeProperty(t,o);this._needsReload=!0}}},createCell:{type:'function',default:function(){return function(){return new Composite}},set:function(t,o){if(o!==this.createCell){this._storeProperty(t,o);this._needsReload=!0}}},updateCell:{type:'function',default:function(){return function(){}},set:function(t,o){if(o!==this.updateCell){this._storeProperty(t,o);this._needsReload=!0}}},refreshEnabled:{type:'boolean',default:!1},refreshIndicator:{type:'boolean',nocache:!0},refreshMessage:{type:'string',default:''},firstVisibleIndex:{type:'number',readonly:!0},lastVisibleIndex:{type:'number',readonly:!0},columnCount:{type:'number',default:1}});function resolveProperty(t,o){var n=t[o];if(typeof n==='function'){return n.apply(null,Array.prototype.slice.call(arguments,2))}return n}function encodeCellType(t,o){var n=t._cellTypes||(t._cellTypes=[]),l=n.indexOf(o);if(l===-1){l+=n.push(o)}return l}function decodeCellType(t,o){var n=t._cellTypes||[];return n[o]||null}function encodeCellHeight(t){if(t==='auto'){return-1}if(isNumber$1(t)){return Math.max(-1,t)}console.warn('Invalid cell height: '+t)}var triggerChangeFirstVisibleIndex=createDelegate('firstVisibleIndex'),triggerChangeLastVisibleIndex=createDelegate('lastVisibleIndex');function createDelegate(t){return function(){var o=this.get(t);if(o!==this['_prev:'+t]){this._triggerChangeEvent(t,o)}this['_prev:'+t]=o}}function isNumber$1(t){return typeof t==='number'&&isFinite(t)}var Crypto=function(t){_inherits(Crypto,t);function Crypto(){_classCallCheck(this,Crypto);var o=_possibleConstructorReturn(this,(Crypto.__proto__||Object.getPrototypeOf(Crypto)).call(this));o._create('tabris.Crypto');return o}_createClass(Crypto,[{key:'getRandomValues',value:function getRandomValues(o){if(arguments.length===0){throw new Error('Not enough arguments to Crypto.getRandomValues')}if(!isIntArray(o)){throw new Error('Unsupported type in Crypto.getRandomValues')}var n=o.byteLength,l=this._nativeCall('getRandomValues',{byteLength:n});if(l.length!==n){throw new Error('Not enough random bytes available')}new Uint8Array(o.buffer).set(l)}}]);return Crypto}(NativeObject);function isIntArray(t){return t instanceof Int8Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array}var ImageView=function(t){_inherits(ImageView,t);function ImageView(){_classCallCheck(this,ImageView);return _possibleConstructorReturn(this,(ImageView.__proto__||Object.getPrototypeOf(ImageView)).apply(this,arguments))}_createClass(ImageView,[{key:'_listen',value:function _listen(o,n){if(o==='load'){this._nativeListen(o,n)}else{_get(ImageView.prototype.__proto__||Object.getPrototypeOf(ImageView.prototype),'_listen',this).call(this,o,n)}}},{key:'_nativeType',get:function(){return'tabris.ImageView'}}]);return ImageView}(Widget);NativeObject.defineProperties(ImageView.prototype,{image:{type:'image',default:null},scaleMode:{type:['choice',['auto','fit','fill','stretch','none']],default:'auto'},tintColor:{type:'color',set:function(t,o){this._nativeSet(t,o===void 0?null:o);this._storeProperty(t,o)}}});var InactivityTimer=function(t){_inherits(InactivityTimer,t);function InactivityTimer(o){_classCallCheck(this,InactivityTimer);var n=_possibleConstructorReturn(this,(InactivityTimer.__proto__||Object.getPrototypeOf(InactivityTimer)).call(this));n._create('tabris.InactivityTimer',o);n._nativeListen('timeout',!0);return n}_createClass(InactivityTimer,[{key:'start',value:function start(){this._nativeCall('start')}},{key:'cancel',value:function cancel(){this._nativeCall('cancel')}}]);return InactivityTimer}(NativeObject);NativeObject.defineProperties(InactivityTimer.prototype,{delay:{type:'natural',default:0}});var EVENT_TYPES$3=['input','accept','select'],SearchAction=function(t){_inherits(SearchAction,t);function SearchAction(){_classCallCheck(this,SearchAction);return _possibleConstructorReturn(this,(SearchAction.__proto__||Object.getPrototypeOf(SearchAction)).apply(this,arguments))}_createClass(SearchAction,[{key:'_listen',value:function _listen(o,n){if(EVENT_TYPES$3.indexOf(o)!==-1){this._nativeListen(o,n)}else{_get(SearchAction.prototype.__proto__||Object.getPrototypeOf(SearchAction.prototype),'_listen',this).call(this,o,n)}}},{key:'open',value:function open(){this._nativeCall('open',{});return this}},{key:'_nativeType',get:function(){return'tabris.SearchAction'}}]);return SearchAction}(Widget);NativeObject.defineProperties(SearchAction.prototype,{image:{type:'image',default:null},placementPriority:{type:['choice',['low','high','normal']],default:'normal'},title:{type:'string',default:''},proposals:{default:function(){return[]}},text:{type:'string',nocache:!0},message:{type:'string',default:''}});var NavigationView=function(t){_inherits(NavigationView,t);function NavigationView(o){_classCallCheck(this,NavigationView);var n=_possibleConstructorReturn(this,(NavigationView.__proto__||Object.getPrototypeOf(NavigationView)).call(this,o));n._nativeListen('backnavigation',!0);return n}_createClass(NavigationView,[{key:'_acceptChild',value:function _acceptChild(o){return o instanceof Page||o instanceof Action||o instanceof SearchAction}},{key:'_addChild',value:function _addChild(o,n){var l=o instanceof Page&&typeof n!=='number'||n===this.pages().length;if(l){this._triggerDisappear()}_get(NavigationView.prototype.__proto__||Object.getPrototypeOf(NavigationView.prototype),'_addChild',this).call(this,o,n);if(l){this._triggerAppear()}}},{key:'_removeChild',value:function _removeChild(o){var n=o instanceof Page&&o===this.pages().last();if(n){this._triggerDisappear()}_get(NavigationView.prototype.__proto__||Object.getPrototypeOf(NavigationView.prototype),'_removeChild',this).call(this,o);if(n){this._triggerAppear()}}},{key:'_handleBackNavigation',value:function _handleBackNavigation(){this._pop(this.pages().last())}},{key:'_pop',value:function _pop(o){if(o&&o.autoDispose){o.dispose()}else if(o){o._setParent(null)}}},{key:'_listen',value:function _listen(o,n){if(o==='topToolbarHeightChanged'){this._nativeListen('change_topToolbarHeight',n)}else if(o==='bottomToolbarHeightChanged'){this._nativeListen('change_bottomToolbarHeight',n)}else{_get(NavigationView.prototype.__proto__||Object.getPrototypeOf(NavigationView.prototype),'_listen',this).call(this,o,n)}}},{key:'_trigger',value:function _trigger(o,n){if(o==='backnavigation'){this._handleBackNavigation()}else if(o==='change_topToolbarHeight'){this._triggerChangeEvent('topToolbarHeight',n.value)}else if(o==='change_bottomToolbarHeight'){this._triggerChangeEvent('bottomToolbarHeight',n.value)}else{return _get(NavigationView.prototype.__proto__||Object.getPrototypeOf(NavigationView.prototype),'_trigger',this).call(this,o,n)}}},{key:'_triggerAppear',value:function _triggerAppear(){var o=this.pages().last();if(o){o.trigger('appear',{target:o})}}},{key:'_triggerDisappear',value:function _triggerDisappear(){var o=this.pages().last();if(o){o.trigger('disappear',{target:o})}}},{key:'pages',value:function pages(){return this.children().filter(function(o){return o instanceof Page})}},{key:'_nativeType',get:function(){return'tabris.NavigationView'}}]);return NavigationView}(Composite);NativeObject.defineProperties(NavigationView.prototype,{drawerActionVisible:{type:'boolean',default:!1},toolbarVisible:{type:'boolean',default:!0},toolbarColor:{type:'color'},topToolbarHeight:{readonly:!0},bottomToolbarHeight:{readonly:!0},titleTextColor:{type:'color'},actionColor:{type:'color'},actionTextColor:{type:'color'},pageAnimation:{type:['choice',['default','none']],default:'default'},win_toolbarTheme:{type:['choice',['default','light','dark']],default:'default'},win_toolbarOverflowTheme:{type:['choice',['default','light','dark']],default:'default'},win_drawerActionTheme:{type:['choice',['default','light','dark']],default:'default'},win_drawerActionBackground:{type:'color'}});var Page=function(t){_inherits(Page,t);function Page(){_classCallCheck(this,Page);return _possibleConstructorReturn(this,(Page.__proto__||Object.getPrototypeOf(Page)).apply(this,arguments))}_createClass(Page,[{key:'insertBefore',value:function insertBefore(){throw new Error('insertBefore not supported on Page')}},{key:'insertAfter',value:function insertAfter(){throw new Error('insertAfter not supported on Page')}},{key:'_setParent',value:function _setParent(o,n){if(o&&!(o instanceof NavigationView)){throw new Error('Page could not be appended to '+o)}_get(Page.prototype.__proto__||Object.getPrototypeOf(Page.prototype),'_setParent',this).call(this,o,n)}},{key:'_nativeType',get:function(){return'tabris.Page'}}]);return Page}(Composite);NativeObject.defineProperties(Page.prototype,{image:{type:'image',default:null},title:{type:'string',default:''},autoDispose:{type:'boolean',default:!0}});var Picker=function(t){_inherits(Picker,t);function Picker(o){_classCallCheck(this,Picker);var n=_possibleConstructorReturn(this,(Picker.__proto__||Object.getPrototypeOf(Picker)).call(this,Object.assign({selectionIndex:0},o)));tabris.on('flush',n._update,n);n.on('dispose',function(){return tabris.off('flush',n._update,n)});return n}_createClass(Picker,[{key:'_update',value:function _update(){if(this.$needsUpdateItems){for(var o=new Array(this.itemCount),n=0;n<o.length;n++){o[n]=this.itemText(n)}this._nativeSet('items',o);delete this.$needsUpdateItems}if(this.$newSelectionIndex>=0){this._nativeSet('selectionIndex',this.$newSelectionIndex);this._triggerChangeEvent('selectionIndex',this.$newSelectionIndex);delete this.$newSelectionIndex}}},{key:'_listen',value:function _listen(o,n){if(o==='select'){this._nativeListen(o,n)}else if(o==='selectionIndexChanged'){this._onoff('select',n,this.$triggerSelectionIndexChanged)}else{_get(Picker.prototype.__proto__||Object.getPrototypeOf(Picker.prototype),'_listen',this).call(this,o,n)}}},{key:'_trigger',value:function _trigger(o,n){if(o==='select'){return _get(Picker.prototype.__proto__||Object.getPrototypeOf(Picker.prototype),'_trigger',this).call(this,'select',{index:n.selectionIndex})}return _get(Picker.prototype.__proto__||Object.getPrototypeOf(Picker.prototype),'_trigger',this).call(this,o,n)}},{key:'$triggerSelectionIndexChanged',value:function $triggerSelectionIndexChanged(o){var{index:n}=o;this._triggerChangeEvent('selectionIndex',n)}},{key:'_nativeType',get:function(){return'tabris.Picker'}}]);return Picker}(Widget);NativeObject.defineProperties(Picker.prototype,{itemCount:{type:'natural',default:0,set:function(t,o){this._storeProperty(t,o);this.$needsUpdateItems=!0}},itemText:{type:'function',default:function(){return function(){return''}},set:function(t,o){this.$needsUpdateItems=!0;this._storeProperty(t,o)}},selectionIndex:{type:'natural',default:0,set:function(t,o){this.$newSelectionIndex=o},get:function(t){return this._nativeGet(t)}},fillColor:{type:'color'},borderColor:{type:'color'}});var Pbkdf2=function(t){_inherits(Pbkdf2,t);function Pbkdf2(){_classCallCheck(this,Pbkdf2);var o=_possibleConstructorReturn(this,(Pbkdf2.__proto__||Object.getPrototypeOf(Pbkdf2)).call(this));o._create('tabris.pkcs5.Pbkdf2');o._nativeListen('done',!0);return o}_createClass(Pbkdf2,[{key:'start',value:function start(o){this._nativeCall('start',o)}}]);return Pbkdf2}(NativeObject),Pkcs5=function(){function Pkcs5(){_classCallCheck(this,Pkcs5)}_createClass(Pkcs5,[{key:'pbkdf2',value:function pbkdf2(t,o,n,l){var s=arguments;return new Promise(function(p){if(s.length<4){throw new Error('Not enough arguments to pbkdf2')}if(typeof t!=='string'){throw new Error('Invalid type for password in pbkdf2')}if(!(o instanceof Uint8Array)){throw new Error('Invalid type for salt in pbkdf2')}if(typeof n!=='number'||n<=0){throw new Error('Invalid number for iterationCount in pbkdf2')}if(typeof l!=='number'||l<=0){throw new Error('Invalid number for keySize in pbkdf2')}var u=new Pbkdf2;u.on('done',function(_){u.dispose();p(_.key)});u.start({password:t,salt:toArray(o),iterationCount:n,keySize:l})})}}]);return Pkcs5}();function toArray(t){for(var o=new Array(t.length),n=0;n<t.length;n++){o[n]=t[n]}return o}var ProgressEvent=function(t){_inherits(ProgressEvent,t);function ProgressEvent(o,n){_classCallCheck(this,ProgressEvent);if(arguments.length<1){throw new Error('Not enough arguments to ProgressEvent')}var l=_possibleConstructorReturn(this,(ProgressEvent.__proto__||Object.getPrototypeOf(ProgressEvent)).call(this,o,n));l.$lengthComputable=n&&n.lengthComputable||!1;l.$loaded=n&&n.loaded||0;l.$total=n&&n.total||0;return l}_createClass(ProgressEvent,[{key:'lengthComputable',get:function(){return this.$lengthComputable}},{key:'loaded',get:function(){return this.$loaded}},{key:'total',get:function(){return this.$total}}]);return ProgressEvent}(Event),ProgressBar=function(t){_inherits(ProgressBar,t);function ProgressBar(){_classCallCheck(this,ProgressBar);return _possibleConstructorReturn(this,(ProgressBar.__proto__||Object.getPrototypeOf(ProgressBar)).apply(this,arguments))}_createClass(ProgressBar,[{key:'_nativeType',get:function(){return'tabris.ProgressBar'}}]);return ProgressBar}(Widget);NativeObject.defineProperties(ProgressBar.prototype,{minimum:{type:'integer',default:0},maximum:{type:'integer',default:100},selection:{type:'integer',default:0},state:{type:['choice',['normal','paused','error']],default:'normal'}});var RadioButton=function(t){_inherits(RadioButton,t);function RadioButton(){_classCallCheck(this,RadioButton);return _possibleConstructorReturn(this,(RadioButton.__proto__||Object.getPrototypeOf(RadioButton)).apply(this,arguments))}_createClass(RadioButton,[{key:'_listen',value:function _listen(o,n){if(o==='select'){this._nativeListen(o,n)}else if(o==='checkedChanged'){this._onoff('select',n,this.$triggerChangeChecked)}else{_get(RadioButton.prototype.__proto__||Object.getPrototypeOf(RadioButton.prototype),'_listen',this).call(this,o,n)}}},{key:'$triggerChangeChecked',value:function $triggerChangeChecked(o){var{checked:n}=o;this._triggerChangeEvent('checked',n)}},{key:'_nativeType',get:function(){return'tabris.RadioButton'}}]);return RadioButton}(Widget);NativeObject.defineProperties(RadioButton.prototype,{text:{type:'string',default:''},checked:{type:'boolean',nocache:!0}});var EVENT_TYPES$4=['scrollX','scrollY'],ScrollView=function(t){_inherits(ScrollView,t);function ScrollView(){_classCallCheck(this,ScrollView);return _possibleConstructorReturn(this,(ScrollView.__proto__||Object.getPrototypeOf(ScrollView)).apply(this,arguments))}_createClass(ScrollView,[{key:'_listen',value:function _listen(o,n){if(EVENT_TYPES$4.indexOf(o)!==-1){this._nativeListen(o,n)}else if(o==='offsetXChanged'){this._onoff('scrollX',n,this.$triggerChangeOffsetX)}else if(o==='offsetYChanged'){this._onoff('scrollY',n,this.$triggerChangeOffsetY)}else{_get(ScrollView.prototype.__proto__||Object.getPrototypeOf(ScrollView.prototype),'_listen',this).call(this,o,n)}}},{key:'$triggerChangeOffsetX',value:function $triggerChangeOffsetX(o){var{offset:n}=o;this._triggerChangeEvent('offsetX',n)}},{key:'$triggerChangeOffsetY',value:function $triggerChangeOffsetY(o){var{offset:n}=o;this._triggerChangeEvent('offsetY',n)}},{key:'scrollToY',value:function scrollToY(o,n){this._nativeCall('scrollToY',{offset:o,animate:n&&'animate'in n?!!n.animate:!0});return this}},{key:'scrollToX',value:function scrollToX(o,n){this._nativeCall('scrollToX',{offset:o,animate:n&&'animate'in n?!!n.animate:!0});return this}},{key:'_nativeType',get:function(){return'tabris.ScrollView'}}]);return ScrollView}(Composite);NativeObject.defineProperties(ScrollView.prototype,{direction:{type:['choice',['horizontal','vertical']],default:'vertical'},offsetX:{type:'number',nocache:!0,readonly:!0},offsetY:{type:'number',nocache:!0,readonly:!0}});var Slider=function(t){_inherits(Slider,t);function Slider(){_classCallCheck(this,Slider);return _possibleConstructorReturn(this,(Slider.__proto__||Object.getPrototypeOf(Slider)).apply(this,arguments))}_createClass(Slider,[{key:'_listen',value:function _listen(o,n){if(o==='select'){this._nativeListen(o,n)}else if(o==='selectionChanged'){this._onoff('select',n,this.$triggerChangeSelection)}else{_get(Slider.prototype.__proto__||Object.getPrototypeOf(Slider.prototype),'_listen',this).call(this,o,n)}}},{key:'$triggerChangeSelection',value:function $triggerChangeSelection(o){var{selection:n}=o;this._triggerChangeEvent('selection',n)}},{key:'_nativeType',get:function(){return'tabris.Slider'}}]);return Slider}(Widget);NativeObject.defineProperties(Slider.prototype,{minimum:{type:'integer',default:0},maximum:{type:'integer',default:100},selection:{type:'integer',nocache:!0}});var Switch=function(t){_inherits(Switch,t);function Switch(){_classCallCheck(this,Switch);return _possibleConstructorReturn(this,(Switch.__proto__||Object.getPrototypeOf(Switch)).apply(this,arguments))}_createClass(Switch,[{key:'_listen',value:function _listen(o,n){if(o==='select'){this._nativeListen(o,n)}else if(o==='checkedChanged'){this._onoff('select',n,this.$triggerChangeChecked)}else{_get(Switch.prototype.__proto__||Object.getPrototypeOf(Switch.prototype),'_listen',this).call(this,o,n)}}},{key:'$triggerChangeChecked',value:function $triggerChangeChecked(o){var{checked:n}=o;this._triggerChangeEvent('checked',n)}},{key:'_nativeType',get:function(){return'tabris.Switch'}}]);return Switch}(Widget);NativeObject.defineProperties(Switch.prototype,{checked:{type:'boolean',nocache:!0},thumbOnColor:{type:'color'},thumbOffColor:{type:'color'},trackOnColor:{type:'color'},trackOffColor:{type:'color'}});var EVENT_TYPES$5=['select','scroll'],TabFolder=function(t){_inherits(TabFolder,t);function TabFolder(){_classCallCheck(this,TabFolder);return _possibleConstructorReturn(this,(TabFolder.__proto__||Object.getPrototypeOf(TabFolder)).apply(this,arguments))}_createClass(TabFolder,[{key:'_acceptChild',value:function _acceptChild(o){return o instanceof Tab}},{key:'_listen',value:function _listen(o,n){if(EVENT_TYPES$5.indexOf(o)!==-1){this._nativeListen(o,n)}else if(o==='selectionChanged'){this._onoff('select',n,this.$triggerChangeSelection)}else{_get(TabFolder.prototype.__proto__||Object.getPrototypeOf(TabFolder.prototype),'_listen',this).call(this,o,n)}}},{key:'_trigger',value:function _trigger(o,n){if(o==='select'){var l=tabris._proxies.find(n.selection);return _get(TabFolder.prototype.__proto__||Object.getPrototypeOf(TabFolder.prototype),'_trigger',this).call(this,'select',{tab:l})}if(o==='scroll'){var l=n.selection?tabris._proxies.find(n.selection):null;return _get(TabFolder.prototype.__proto__||Object.getPrototypeOf(TabFolder.prototype),'_trigger',this).call(this,'scroll',{selection:l,offset:n.offset})}return _get(TabFolder.prototype.__proto__||Object.getPrototypeOf(TabFolder.prototype),'_trigger',this).call(this,o,n)}},{key:'$triggerChangeSelection',value:function $triggerChangeSelection(o){var{tab:n}=o;this._triggerChangeEvent('selection',n)}},{key:'_nativeType',get:function(){return'tabris.TabFolder'}}]);return TabFolder}(Composite);NativeObject.defineProperties(TabFolder.prototype,{paging:{type:'boolean',default:!1},tabBarLocation:{type:['choice',['top','bottom','hidden','auto']],default:'auto'},tabMode:{type:['choice',['fixed','scrollable']],default:'fixed'},selection:{set:function(t,o){if(this._children.indexOf(o)<0){console.warn('Can not set TabFolder selection to '+o);return}this._nativeSet('selection',o.cid);this._triggerChangeEvent('selection',o)},get:function(){var t=this._nativeGet('selection');return t?tabris._proxies.find(t):null}}});var Tab=function(t){_inherits(Tab,t);function Tab(){_classCallCheck(this,Tab);return _possibleConstructorReturn(this,(Tab.__proto__||Object.getPrototypeOf(Tab)).apply(this,arguments))}_createClass(Tab,[{key:'_setParent',value:function _setParent(o,n){if(o&&!(o instanceof TabFolder)){throw new Error('Tab could not be appended to '+o)}_get(Tab.prototype.__proto__||Object.getPrototypeOf(Tab.prototype),'_setParent',this).call(this,o,n)}},{key:'_nativeType',get:function(){return'tabris.Tab'}}]);return Tab}(Composite);NativeObject.defineProperties(Tab.prototype,{title:{type:'string',default:''},image:{type:'image',default:null},selectedImage:{type:'image',default:null},badge:{type:'string',default:''}});var EVENT_TYPES$6=['focus','blur','accept','input'],TextInput=function(t){_inherits(TextInput,t);function TextInput(){_classCallCheck(this,TextInput);return _possibleConstructorReturn(this,(TextInput.__proto__||Object.getPrototypeOf(TextInput)).apply(this,arguments))}_createClass(TextInput,[{key:'_listen',value:function _listen(o,n){if(EVENT_TYPES$6.indexOf(o)!==-1){this._nativeListen(o,n)}else if(o==='textChanged'){this._onoff('input',n,this.$triggerChangeSelection)}else{_get(TextInput.prototype.__proto__||Object.getPrototypeOf(TextInput.prototype),'_listen',this).call(this,o,n)}}},{key:'$triggerChangeSelection',value:function $triggerChangeSelection(o){var{text:n}=o;this._triggerChangeEvent('text',n)}},{key:'_nativeType',get:function(){return'tabris.TextInput'}}]);return TextInput}(Widget);NativeObject.defineProperties(TextInput.prototype,{type:{type:['choice',['default','password','search','multiline']]},text:{type:'string',nocache:!0},message:{type:'string',default:''},editable:{type:'boolean',default:!0},keepFocus:{type:'boolean'},alignment:{type:['choice',['left','center','right']],default:'left'},autoCorrect:{type:'boolean',default:!1},autoCapitalize:{type:'boolean',nocache:!0},keyboard:{type:['choice',['ascii','decimal','email','number','numbersAndPunctuation','phone','url','default']],default:'default'},enterKeyType:{type:['choice',['default','done','next','send','search','go']],default:'default'},focused:{type:'boolean',nocache:!0},fillColor:{type:'color'},borderColor:{type:'color'}});var TextView=function(t){_inherits(TextView,t);function TextView(){_classCallCheck(this,TextView);return _possibleConstructorReturn(this,(TextView.__proto__||Object.getPrototypeOf(TextView)).apply(this,arguments))}_createClass(TextView,[{key:'_nativeType',get:function(){return'tabris.TextView'}}]);return TextView}(Widget);NativeObject.defineProperties(TextView.prototype,{alignment:{type:['choice',['left','right','center']],default:'left'},markupEnabled:{type:'boolean',default:!1},lineSpacing:{type:'number',default:1},selectable:{type:'boolean',default:!1},maxLines:{type:['nullable','natural'],default:null,set:function(t,o){this._nativeSet(t,o<=0?null:o);this._storeProperty(t,o)}},text:{type:'string',default:''}});var ToggleButton=function(t){_inherits(ToggleButton,t);function ToggleButton(){_classCallCheck(this,ToggleButton);return _possibleConstructorReturn(this,(ToggleButton.__proto__||Object.getPrototypeOf(ToggleButton)).apply(this,arguments))}_createClass(ToggleButton,[{key:'_listen',value:function _listen(o,n){if(o==='select'){this._nativeListen(o,n)}else if(o==='checkedChanged'){this._onoff('select',n,this.$triggerChangeChecked)}else{_get(ToggleButton.prototype.__proto__||Object.getPrototypeOf(ToggleButton.prototype),'_listen',this).call(this,o,n)}}},{key:'$triggerChangeChecked',value:function $triggerChangeChecked(o){var{checked:n}=o;this._triggerChangeEvent('checked',n)}},{key:'_nativeType',get:function(){return'tabris.ToggleButton'}}]);return ToggleButton}(Widget);NativeObject.defineProperties(ToggleButton.prototype,{text:{type:'string',default:''},image:{type:'image',default:null},checked:{type:'boolean',nocache:!0},alignment:{type:['choice',['left','right','center']],default:'center'}});var Video=function(t){_inherits(Video,t);function Video(){_classCallCheck(this,Video);return _possibleConstructorReturn(this,(Video.__proto__||Object.getPrototypeOf(Video)).apply(this,arguments))}_createClass(Video,[{key:'_listen',value:function _listen(o,n){if(o==='stateChanged'){this._nativeListen('statechange',n)}else{_get(Video.prototype.__proto__||Object.getPrototypeOf(Video.prototype),'_listen',this).call(this,o,n)}}},{key:'_trigger',value:function _trigger(o,n){if(o==='statechange'){return this._triggerChangeEvent('state',n.state)}return _get(Video.prototype.__proto__||Object.getPrototypeOf(Video.prototype),'_trigger',this).call(this,o,n)}},{key:'pause',value:function pause(){this._nativeCall('pause')}},{key:'play',value:function play(o){this._nativeCall('play',{speed:arguments.length>0?types.number.encode(o):1})}},{key:'seek',value:function seek(o){this._nativeCall('seek',{position:types.number.encode(o)})}},{key:'_nativeType',get:function(){return'tabris.Video'}}]);return Video}(Widget);NativeObject.defineProperties(Video.prototype,{url:{type:'string',default:''},controlsVisible:{type:'boolean',default:!0},autoPlay:{type:'boolean',default:!0},speed:{readonly:!0},position:{readonly:!0},duration:{readonly:!0},state:{readonly:!0}});var EVENT_TYPES$7=['navigate','load','download','message'],WebView=function(t){_inherits(WebView,t);function WebView(){_classCallCheck(this,WebView);return _possibleConstructorReturn(this,(WebView.__proto__||Object.getPrototypeOf(WebView)).apply(this,arguments))}_createClass(WebView,[{key:'_listen',value:function _listen(o,n){if(EVENT_TYPES$7.indexOf(o)!==-1){this._nativeListen(o,n)}else{_get(WebView.prototype.__proto__||Object.getPrototypeOf(WebView.prototype),'_listen',this).call(this,o,n)}}},{key:'postMessage',value:function postMessage(o,n){this._nativeCall('postMessage',{data:o,origin:n});return this}},{key:'goBack',value:function goBack(){this._nativeCall('goBack')}},{key:'goForward',value:function goForward(){this._nativeCall('goForward')}},{key:'_loadData',value:function _loadData(o,n){this._nativeCall('loadData',{data:o,mimeType:n})}},{key:'_nativeType',get:function(){return'tabris.WebView'}}]);return WebView}(Widget);NativeObject.defineProperties(WebView.prototype,{url:{type:'string',nocache:!0},html:{type:'string',nocache:!0},headers:{type:'any',default:{}},canGoBack:{type:'boolean',nocache:!0,readonly:!0},canGoForward:{type:'boolean',nocache:!0,readonly:!0},initScript:{type:'string'}});var CONNECTING=0,OPEN=1,CLOSING=2,CLOSED=3,CONSTANTS={CONNECTING:{value:CONNECTING},OPEN:{value:OPEN},CLOSING:{value:CLOSING},CLOSED:{value:CLOSED}},EVENT_TYPES$8=['open','message','close','error'],_WebSocket=function(t){_inherits(_WebSocket,t);function _WebSocket(o){_classCallCheck(this,_WebSocket);var n=_possibleConstructorReturn(this,(_WebSocket.__proto__||Object.getPrototypeOf(_WebSocket)).call(this));n._create('tabris.WebSocket',o);EVENT_TYPES$8.forEach(function(l){return n._nativeListen(l,!0)});return n}return _WebSocket}(NativeObject);NativeObject.defineProperties(_WebSocket.prototype,{url:{type:'string',default:''},protocol:{type:'any',default:''},binaryType:{type:'string',default:'blob'},bufferedAmount:{type:'number',nocache:!0}});var WebSocket=function(){function WebSocket(t,o){_classCallCheck(this,WebSocket);if(typeof t!=='string'){throw new Error('The WebSocket url has to be of type string')}var n=extractScheme(t);if(!(n==='ws'||n==='wss')){throw new Error('The WebSocket url has to have a scheme of \'ws\' or \'wss\' but is \''+n+'\'')}if(typeof o!=='string'&&!Array.isArray(o)){throw new Error('The WebSocket protocol has too be a string or an array of strings')}var l=Array.isArray(o)?o:[o];this.url=t;this.readyState=CONNECTING;this.protocol='';this.extensions='';addDOMEventTargetMethods(this);defineEventHandlerProperties(this,EVENT_TYPES$8);this._proxy=this.$createProxy(t,l)}_createClass(WebSocket,[{key:'$createProxy',value:function $createProxy(t,o){var n=this;return new _WebSocket({url:t,protocol:o}).on('open',function(l){n.readyState=OPEN;n.protocol=l.protocol;n.extensions=l.extensions;n.dispatchEvent(Object.assign(new Event('open'),omit(l,['target','type','timeStamp'])))}).on('message',function(l){if(n.readyState===OPEN){n.dispatchEvent(Object.assign(new Event('message'),omit(l,['target','type','timeStamp'])))}}).on('close',function(l){n.readyState=CLOSED;n.dispatchEvent(Object.assign(new Event('close'),omit(l,['target','type','timeStamp'])))}).on('error',function(l){n.readyState=CLOSED;n.dispatchEvent(Object.assign(new Event('error'),omit(l,['target','type','timeStamp'])))})}},{key:'send',value:function send(t){if(this.readyState===CONNECTING){throw new Error('Can not \'send\' WebSocket message when WebSocket state is CONNECTING')}if(typeof t==='string'){this._proxy._nativeCall('send',{data:t})}else if(t instanceof ArrayBuffer||ArrayBuffer.isView(t)){this._proxy._nativeCall('send',{data:t})}else{throw new Error('Data of type '+typeof t+' is not supported in WebSocket \'send\' operation')}}},{key:'close',value:function close(t,o){if(t&&(typeof t!=='number'||!(typeof t==='number'&&(t===1e3||t>=3e3&&t<=4999)))){throw new Error('A given close code has to be either 1000 or in the range 3000 - 4999 inclusive')}if(o&&getStringByteSize(o)>123){throw new Error('The close reason can not be larger than 123 utf-8 bytes')}if(this.readyState!==CLOSING&&this.readyState!==CLOSED){this.readyState=CLOSING;var n={};if(t){n.code=t}if(o){n.reason=o}this._proxy._nativeCall('close',n)}}},{key:'binaryType',set:function(t){this._proxy.binaryType=t},get:function(){return this._proxy.binaryType}},{key:'bufferedAmount',set:function(){console.warn('Can not set read-only property "bufferedAmount"')},get:function(){return this._proxy.bufferedAmount}}]);return WebSocket}();Object.defineProperties(WebSocket,CONSTANTS);Object.defineProperties(WebSocket.prototype,CONSTANTS);function getStringByteSize(t){var o=0;if(!t.length){return 0}for(var n=0,l;n<t.length;n++){l=t.charCodeAt(n);if(l<=127){o+=1}else if(l<=2047){o+=2}else if(l>=55296&&l<=57343){o+=4;n++}else if(l<65535){o+=3}else{o+=4}}return o}function extractScheme(t){var o=/^(\S+?):/.exec(t);return o?o[1]:null}var HttpRequest=function(t){_inherits(HttpRequest,t);function HttpRequest(){_classCallCheck(this,HttpRequest);var o=_possibleConstructorReturn(this,(HttpRequest.__proto__||Object.getPrototypeOf(HttpRequest)).call(this));o._create('tabris.HttpRequest');o._nativeListen('StateChange',!0);o._nativeListen('DownloadProgress',!0);o._nativeListen('UploadProgress',!0);return o}_createClass(HttpRequest,[{key:'abort',value:function abort(){this._nativeCall('abort',{})}},{key:'send',value:function send(o){this._nativeCall('send',o)}}]);return HttpRequest}(NativeObject),UNSENT=0,OPENED=1,HEADERS_RECEIVED=2,LOADING=3,DONE=4,EVENT_TYPES$9=['loadstart','readystatechange','load','loadend','progress','timeout','abort','error'],UPLOAD_EVENT_TYPES=['progress','loadstart','load','loadend','timeout','abort','error'],SUPPORTED_SCHEMES=['http','https','file'],XMLHttpRequest=function(){function XMLHttpRequest(){_classCallCheck(this,XMLHttpRequest);this.$authorRequestHeaders={};this.$timeout=0;this.$status=0;this.$statusText='';this.$responseHeaders='';this.$readyState=UNSENT;this.$responseData='';this.$withCredentials=!1;this.$responseType='';this.$sendInvoked=!1;this.$isSynchronous=!1;this.$error=!1;this.$uploadComplete=!1;Object.defineProperty(this,'upload',{value:{}});defineEventHandlerProperties(this,EVENT_TYPES$9);defineEventHandlerProperties(this.upload,UPLOAD_EVENT_TYPES);addDOMEventTargetMethods(this);addDOMEventTargetMethods(this.upload)}_createClass(XMLHttpRequest,[{key:'open',value:function open(t,o,n,l,s){var p={};validateRequiredOpenArgs(t,o);p.source=o;var u=o.replace(/.*?:\/\//g,'');p.isRelative=!/^(?:[a-z]+:)?\/\//i.test(o);p.userdata=u.substring(0,u.indexOf('@'));if(typeof n==='undefined'){n=!0;l=null;s=null}if(!n){throw new Error('Only asynchronous request supported.')}if(p.isRelative){if(l&&s){p.userdata=l+':'+s}}this.$requestMethod=t;this.$requestUrl=p;this.$isSynchronous=!n;this.$authorRequestHeaders={};this.$sendInvoked=!1;this.$responseData=null;if(this.$readyState!==OPENED){this.$readyState=OPENED;dispatchEvent('readystatechange',this)}}},{key:'send',value:function send(t){var o=this;this.$proxy=new HttpRequest().on('StateChange',function(n){return handleStateChange(n,o)}).on('DownloadProgress',function(n){return dispatchProgressEvent('progress',o,n)}).on('UploadProgress',function(n){return dispatchProgressEvent('progress',o.upload,n)});if(this.$readyState!==OPENED){throw new Error('InvalidStateError: Object\'s state must be \'OPENED\', failed to execute \'send\'')}if(this.$sendInvoked){throw new Error('InvalidStateError: \'send\' invoked, failed to execute \'send\'')}if(['GET','HEAD'].indexOf(this.$requestMethod)>-1){t=null}this.$requestBody=t;this.$error=this.$uploadComplete=!1;if(!t){this.$uploadComplete=!0}if(this.$withCredentials){if(this.$requestUrl.userdata){this.setRequestHeader('Authorization','Basic '+this.$requestUrl.userdata)}}this.$sendInvoked=!0;dispatchProgressEvent('loadstart',this);if(!this.$uploadComplete){dispatchProgressEvent('loadstart',this.upload)}this.$proxy.send({url:this.$requestUrl.source,method:this.$requestMethod,timeout:this.timeout,headers:this.$authorRequestHeaders,data:this.$requestBody,responseType:this.$responseType})}},{key:'abort',value:function abort(){if(this.$proxy){this.$proxy.abort()}if(!([UNSENT,OPENED].indexOf(this.$readyState)>-1&&!this.$sendInvoked||this.$readyState===DONE)){dispatchEvent('readystatechange',this);if(!this.$uploadComplete){this.$uploadComplete=!0;dispatchAbortProgressEvents(this.upload)}dispatchAbortProgressEvents(this)}this.$readyState=UNSENT}},{key:'setRequestHeader',value:function setRequestHeader(t,o){if(this.$readyState!==OPENED){throw new Error('InvalidStateError: Object\\\'s state must be \\\'OPENED\\\', failed to execute \\\'setRequestHeader\\\'')}if(this.$sendInvoked){throw new Error('InvalidStateError: cannot set request header if \\\'send()\\\' invoked and request not completed')}if(!validHttpToken(t)){throw new TypeError('Invalid HTTP header name, failed to execute \'open\'')}if(!isValidHttpHeaderValue(o)){throw new TypeError('Invalid HTTP header value, failed to execute \'open\'')}if(t in this.$authorRequestHeaders){this.$authorRequestHeaders[t]=this.$authorRequestHeaders[t]+', '+o}else{this.$authorRequestHeaders[t]=o}}},{key:'getResponseHeader',value:function getResponseHeader(t){if([UNSENT,OPENED].indexOf(this.readyState)>-1){return null}if(this.$error){return null}for(var o in this.$responseHeaders){if(o.toLowerCase()===t.toLowerCase()){return this.$responseHeaders[o]}}return null}},{key:'getAllResponseHeaders',value:function getAllResponseHeaders(){if([UNSENT,OPENED].indexOf(this.readyState)>-1){return''}if(this.$error){return''}var t=[];for(var o in this.$responseHeaders){t.push(o+': '+this.$responseHeaders[o])}return t.join('\r\n')}},{key:'readyState',get:function(){return this.$readyState}},{key:'timeout',get:function(){return this.$timeout},set:function(t){if(!isNaN(t)){this.$timeout=Math.round(t)}}},{key:'responseText',get:function(){if(this.$responseType!==''&&this.$responseType!=='text'){throw new Error('XHR responseText not accessible for non-text responseType')}if(this.$readyState!==LOADING&&this.$readyState!==DONE){return''}return this.$responseData||''}},{key:'response',get:function(){if(this.$responseType===''||this.$responseType==='string'){if(this.$readyState!==LOADING&&this.$readyState!==DONE){return''}return this.$responseData||''}if(this.$readyState!==DONE){return null}return this.$responseData}},{key:'responseType',get:function(){return this.$responseType},set:function(t){if(this.$readyState===LOADING||this.$readyState===DONE){throw new Error('The response type cannot be set when state is LOADING or DONE.')}if(['arraybuffer','blob','document','json','text'].indexOf(t)<0){return}if(['blob','document','json'].indexOf(t)>-1){throw new Error('Unsupported responseType, only \'text\' and \'arraybuffer\' are supported')}this.$responseType=t}},{key:'status',get:function(){if([OPENED,UNSENT].indexOf(this.$readyState)>-1){return 0}if(this.$error){return 0}return this.$status}},{key:'statusText',get:function(){if([OPENED,UNSENT].indexOf(this.$readyState)>-1){return''}if(this.$error){return''}return this.$statusText}},{key:'withCredentials',get:function(){return this.$withCredentials},set:function(t){if(this.$readyState!==UNSENT&&this.$readyState!==OPENED){throw new Error('InvalidStateError: state must be \'UNSENT\' or \'OPENED\' when setting withCredentials')}if(this.$sendInvoked){throw new Error('InvalidStateError: \'send\' invoked, failed to set \'withCredentials\'')}if(typeof t==='boolean'){this.$withCredentials=t}}}]);return XMLHttpRequest}();Object.defineProperties(XMLHttpRequest.prototype,{UNSENT:{value:UNSENT},OPENED:{value:OPENED},HEADERS_RECEIVED:{value:HEADERS_RECEIVED},LOADING:{value:LOADING},DONE:{value:DONE}});function handleStateChange(t,o){switch(t.state){case'headers':o.$readyState=HEADERS_RECEIVED;o.$status=t.code;o.$statusText=t.message;o.$responseHeaders=t.headers;dispatchEvent('readystatechange',o);o.$uploadComplete=!0;dispatchFinishedProgressEvents(o.upload);break;case'loading':o.$readyState=LOADING;dispatchEvent('readystatechange',o);break;case'finished':o.$responseData=t.response;o.$readyState=DONE;dispatchEvent('readystatechange',o);dispatchFinishedProgressEvents(o);dispatchFinishedProgressEvents(o.upload);o.$proxy.dispose();o.$proxy=null;break;case'error':handleRequestError('error',o);break;case'timeout':handleRequestError('timeout',o);break;case'abort':handleRequestError('abort',o);break;}}function handleRequestError(t,o){o.$error=!0;o.$readyState=DONE;dispatchEvent('readystatechange',o);dispatchErrorProgressEvents(t,o);if(!o.$uploadComplete){o.$uploadComplete=!0;dispatchErrorProgressEvents(t,o.upload)}o.$proxy.dispose();o.$proxy=null}function validateRequiredOpenArgs(t,o){if(!t){throw new TypeError('Method argument should be specified to execute \'open\'')}if(!o){throw new TypeError('URL argument should be specified to execute \'open\'')}validateMethod(t);validateUrl(o)}function validateMethod(t){if(!validHttpToken(t)){throw new TypeError('Invalid HTTP method, failed to execute \'open\'')}var n=t.toUpperCase();if(['CONNECT','DELETE','GET','HEAD','OPTIONS','POST','PUT','TRACE','TRACK'].indexOf(n)>=0){t=n}if(['CONNECT','TRACE','TRACK'].indexOf(t)>=0){throw new Error('SecurityError: \''+t+'\' HTTP method is not secure, failed to execute \'open\'')}}function validHttpToken(t){return!(/[^\x21-\x7E]/.test(t)||['(',')','<','>','@',',',';',':','\\','"','/','[',']','?','=','{','}'].indexOf(t)>=0)}function isValidHttpHeaderValue(t){return /^[\x09\x0A\x0D\x20-\x7E\xA0-\xFF]*$/.test(t)&&t.indexOf('\n')<0&&t.indexOf('\r')<0}function validateUrl(t){var o=extractScheme$1(t);if(o&&SUPPORTED_SCHEMES.indexOf(o)===-1){throw new SyntaxError('Unsupported URL scheme, failed to execute \'open\'')}}function extractScheme$1(t){var o=/^(\S+?):/.exec(t);return o?o[1]:null}function dispatchEvent(t,o){o.dispatchEvent(new Event(t))}function dispatchProgressEvent(t,o,n){o.dispatchEvent(new ProgressEvent(t,n))}function dispatchAbortProgressEvents(t){dispatchProgressEvent('progress',t);dispatchProgressEvent('abort',t);dispatchProgressEvent('loadend',t)}function dispatchErrorProgressEvents(t,o){dispatchProgressEvent('progress',o);dispatchProgressEvent(t,o);dispatchProgressEvent('loadend',o)}function dispatchFinishedProgressEvents(t){dispatchProgressEvent('load',t);dispatchProgressEvent('loadend',t)}var Headers=function(){function Headers(t){var o=this;_classCallCheck(this,Headers);this.$map={};if(t instanceof Headers){t.forEach(function(n,l){return o.append(l,n)})}else if(Array.isArray(t)){t.forEach(function(n){return o.append(n[0],n[1])})}else if(t){Object.getOwnPropertyNames(t).forEach(function(n){return o.append(n,t[n])})}}_createClass(Headers,[{key:'append',value:function append(t,o){t=normalizeName(t);var n=this.$map[t];this.$map[t]=n?n+','+o:''+o}},{key:'delete',value:function _delete(t){delete this.$map[normalizeName(t)]}},{key:'get',value:function get(t){t=normalizeName(t);return this.has(t)?this.$map[t]:null}},{key:'has',value:function has(t){return this.$map.hasOwnProperty(normalizeName(t))}},{key:'set',value:function set(t,o){this.$map[normalizeName(t)]=''+o}},{key:'forEach',value:function forEach(t,o){for(var n in this.$map){if(this.$map.hasOwnProperty(n)){t.call(o,this.$map[n],n,this)}}}},{key:'keys',value:function keys(){var t=[];this.forEach(function(o,n){return t.push(n)});return iteratorFor(t)}},{key:'values',value:function values(){var t=[];this.forEach(function(o){return t.push(o)});return iteratorFor(t)}},{key:'entries',value:function entries(){var t=[];this.forEach(function(o,n){return t.push([n,o])});return iteratorFor(t)}},{key:iteratorSymbol(),value:function(){return this.entries()}}]);return Headers}();function normalizeName(t){t=''+t;if(/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t)){throw new TypeError('Invalid character in header field name')}return t.toLowerCase()}function iteratorFor(t){var o={next:function(){var n=t.shift();return{done:n===void 0,value:n}}};o[iteratorSymbol()]=function(){return o};return o}function iteratorSymbol(){return'Symbol'in global&&'iterator'in global.Symbol?global.Symbol.iterator:'@@iterator'}var SUPPORTED_ENCODINGS=['ascii','utf-8'],TextDecoder=function(t){_inherits(TextDecoder,t);function TextDecoder(){_classCallCheck(this,TextDecoder);var o=_possibleConstructorReturn(this,(TextDecoder.__proto__||Object.getPrototypeOf(TextDecoder)).call(this));o._create('tabris.TextDecoder');o._nativeListen('result',!0);o._nativeListen('error',!0);return o}_createClass(TextDecoder,[{key:'decode',value:function(o,n){this._nativeCall('decode',{data:o,encoding:n})}}]);return TextDecoder}(NativeObject);function decode(t,o){return new Promise(function(n,l){if(ArrayBuffer.isView(t)){t=t.buffer}if(!(t instanceof ArrayBuffer)){throw new Error('Invalid buffer type')}o=o||'utf-8';if(!(SUPPORTED_ENCODINGS.indexOf(o)!==-1)){throw new Error('Unsupported encoding: \''+o+'\'')}new TextDecoder().on('result',function(s){var{target:p,string:u}=s;n(u);p.dispose()}).on('error',function(s){var{target:p}=s;l(new Error('Could not decode '+o));p.dispose()}).decode(t,o)})}var Body=function(){function Body(){_classCallCheck(this,Body)}_createClass(Body,[{key:'_initBody',value:function _initBody(t){this._bodyInit=t;if(!t){this._bodyText=''}else if(typeof t==='string'){this._bodyText=t}else if(ArrayBuffer.prototype.isPrototypeOf(t)||ArrayBuffer.isView(t)){this._bodyBuffer=t.slice(0)}else{throw new Error('unsupported BodyInit type')}}},{key:'text',value:function text(){return this.$consumed()||Promise.resolve(this._bodyBuffer?decode(this._bodyBuffer,this._encoding):this._bodyText)}},{key:'json',value:function json(){return this.text().then(JSON.parse)}},{key:'arrayBuffer',value:function arrayBuffer(){return this.$consumed()||Promise.resolve(this._bodyBuffer)}},{key:'$consumed',value:function $consumed(){if(this.$bodyUsed){return Promise.reject(new TypeError('Already read'))}this.$bodyUsed=!0}},{key:'bodyUsed',get:function(){return!!this.$bodyUsed}},{key:'_encoding',get:function(){}}]);return Body}(),METHODS=['DELETE','GET','HEAD','OPTIONS','POST','PUT'],Request=function(t){_inherits(Request,t);function Request(o){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};_classCallCheck(this,Request);var l=_possibleConstructorReturn(this,(Request.__proto__||Object.getPrototypeOf(Request)).call(this)),s=n.body;if(o instanceof Request){if(o.bodyUsed){throw new TypeError('Already read')}if(!s&&o._bodyInit!=null){s=o._bodyInit;o.$bodyUsed=!0}}else{o={url:o}}Object.defineProperties(l,{url:{value:''+o.url},method:{value:normalizeMethod(n.method||o.method||'GET')},headers:{value:new Headers(n.headers||o.headers||{})},credentials:{value:n.credentials||o.credentials||'omit'},mode:{value:n.mode||o.mode||null},referrer:{value:''},timeout:{value:n.timeout||0}});if((l.method==='GET'||l.method==='HEAD')&&s){throw new TypeError('Body not allowed for GET or HEAD requests')}l._initBody(s);return l}_createClass(Request,[{key:'clone',value:function clone(){return new Request(this,{body:this._bodyInit})}}]);return Request}(Body);function normalizeMethod(t){var o=t.toUpperCase();return METHODS.indexOf(o)!==-1?o:t}var REDIRECT_STATUSES=[301,302,303,307,308],Response=function(t){_inherits(Response,t);function Response(o){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};_classCallCheck(this,Response);var l=_possibleConstructorReturn(this,(Response.__proto__||Object.getPrototypeOf(Response)).call(this));Object.defineProperties(l,{url:{value:n.url||''},type:{value:n._type||'default'},status:{value:'status'in n?n.status:200},statusText:{value:'statusText'in n?n.statusText:'OK'},headers:{value:new Headers(n.headers)}});l._initBody(o);return l}_createClass(Response,[{key:'clone',value:function clone(){return new Response(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new Headers(this.headers),url:this.url})}},{key:'ok',get:function(){return this.status>=200&&this.status<300}},{key:'_encoding',get:function(){var o=this.headers.get('content-type')||'',n=o.split(';').slice(1);for(var l of n){var s=/charset=(\S+)/i.exec(l.trim());if(s){return s[1].toLowerCase()}}return null}}],[{key:'error',value:function error(){return new Response(null,{status:0,statusText:'',_type:'error'})}},{key:'redirect',value:function redirect(o,n){if(!(REDIRECT_STATUSES.indexOf(n)!==-1)){throw new RangeError('Invalid status code')}return new Response(null,{status:n,headers:{location:o}})}}]);return Response}(Body);function fetch(t,o){return new Promise(function(n,l){var s=new Request(t,o),p=new HttpRequest,u={};p.on('StateChange',function(_){switch(_.state){case'headers':u.status=_.code;u.statusText=_.message;u.headers=new Headers(_.headers);break;case'finished':u.url=u.headers.get('X-Request-URL')||s.url;n(new Response(_.response,u));p.dispose();break;case'error':l(new TypeError('Network request failed'));p.dispose();break;case'timeout':l(new TypeError('Network request timed out'));p.dispose();break;case'abort':l(new TypeError('Network request aborted'));p.dispose();break;}});p.send({url:s.url,method:s.method,responseType:'arraybuffer',data:typeof s._bodyInit==='undefined'?null:s._bodyInit,headers:encodeHeaders(s.headers),timeout:s.timeout})})}function encodeHeaders(t){var o={};t.forEach(function(n,l){return o[l]=n});return o}var window$1=global.window;module.exports=global.tabris=Object.assign(new Tabris,{Action:Action,ActivityIndicator:ActivityIndicator,AlertDialog:AlertDialog,App:App,Button:Button,Canvas:Canvas,CheckBox:CheckBox,CollectionView:CollectionView,Composite:Composite,ContentView:ContentView,Crypto:Crypto,Device:Device,Drawer:Drawer,Event:Event,ImageData:ImageData,ImageView:ImageView,InactivityTimer:InactivityTimer,NativeObject:NativeObject,NavigationView:NavigationView,NavigationBar:NavigationBar,Page:Page,Picker:Picker,ProgressBar:ProgressBar,ProgressEvent:ProgressEvent,RadioButton:RadioButton,ScrollView:ScrollView,SearchAction:SearchAction,Slider:Slider,Storage:Storage,StatusBar:StatusBar,Switch:Switch,Tab:Tab,TabFolder:TabFolder,TextInput:TextInput,TextView:TextView,ToggleButton:ToggleButton,Ui:Ui,Video:Video,WebSocket:WebSocket,WebView:WebView,Widget:Widget,WidgetCollection:WidgetCollection,XMLHttpRequest:XMLHttpRequest,fetch:fetch,Headers:Headers,Request:Request,Response:Response});Object.assign(window$1,{Crypto:Crypto,ImageData:ImageData,ProgressEvent:ProgressEvent,Storage:Storage,WebSocket:WebSocket,XMLHttpRequest:XMLHttpRequest,fetch:fetch,Headers:Headers,Request:Request,Response:Response});tabris.on('start',function(){tabris.app=create$1();checkVersion(tabris.version,tabris.app._nativeGet('tabrisJsVersion'));tabris.ui=create$2();tabris.device=create();publishDeviceProperties(tabris.device,window$1);window$1.localStorage=tabris.localStorage=create$7();if(tabris.device.platform==='iOS'){window$1.secureStorage=tabris.secureStorage=create$7(!0)}window$1.crypto=tabris.crypto=new Crypto;tabris.pkcs5=new Pkcs5});addDOMDocument(window$1);addDOMEventTargetMethods(window$1);addWindowTimerMethods(window$1);
